import{j as s,b as f}from"./app-C9fBnuOE.js";import{S as x,a as h,b as m,c as j,d as u}from"./select-Dl6e1rl2.js";import{I as p}from"./input-qWEfNBQH.js";import{B as b}from"./button-B_fIfnBb.js";import{t as E}from"./index-BFwC0R9V.js";import{c as _}from"./createLucideIcon-D4c-ObJW.js";import{T as v}from"./trash-2-nXxqySza.js";import"./index-Ds3v4yF_.js";import"./index-Dfe5dhDQ.js";import"./index-B-UXHqoX.js";import"./index-CsWbMgBq.js";import"./index-CNTKN5Ut.js";import"./index-DUsJq6sw.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=_("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),$=[{accessorKey:"item_number",header:"Item #",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(p,{value:i.original.item_number,readOnly:!0,className:"w-24"}):i.original.item_number}},{accessorKey:"quantity",header:"Qty",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{type:"number",min:1,value:i.original.quantity,onChange:l=>{var o;i.original.quantity=parseInt(l.target.value),(o=e==null?void 0:e.setItems)==null||o.call(e,[...n.options.data])},className:"w-20"}),s.jsx(b,{variant:"outline",size:"sm",onClick:()=>{var l;return(l=e==null?void 0:e.onExpandItem)==null?void 0:l.call(e,i.original)},className:"ml-2",children:s.jsx(I,{className:"h-4 w-4"})})]}):i.original.quantity}},{accessorKey:"category_id",header:"Category",cell:({row:i,table:n})=>{var a;const e=n.options.meta,r=(e==null?void 0:e.isEditable)??!1,l=(e==null?void 0:e.categories)??[],o=l.find(t=>t.id===i.original.category_id);return r?s.jsxs(x,{value:(a=i.original.category_id)==null?void 0:a.toString(),onValueChange:t=>{var g;const d=parseInt(t);i.original.category_id=d,i.original.sub_category_id=null,(g=e==null?void 0:e.setItems)==null||g.call(e,[...n.options.data])},children:[s.jsx(h,{children:s.jsx(m,{placeholder:"Select category"})}),s.jsx(j,{children:l.map(t=>s.jsx(u,{value:t.id.toString(),children:t.name},t.id))})]}):s.jsx("span",{children:(o==null?void 0:o.name)||"-"})}},{accessorKey:"sub_category_id",header:"Sub Category",cell:({row:i,table:n})=>{var t,d,g;const e=n.options.meta,r=(e==null?void 0:e.isEditable)??!1,o=((e==null?void 0:e.categories)??[]).find(c=>c.id===i.original.category_id),a=(t=o==null?void 0:o.sub_categories)==null?void 0:t.find(c=>c.id===i.original.sub_category_id);return(d=o==null?void 0:o.sub_categories)!=null&&d.length?r?s.jsxs(x,{value:(g=i.original.sub_category_id)==null?void 0:g.toString(),onValueChange:c=>{var y;i.original.sub_category_id=parseInt(c),(y=e==null?void 0:e.setItems)==null||y.call(e,[...n.options.data])},children:[s.jsx(h,{children:s.jsx(m,{placeholder:"Select sub-category"})}),s.jsx(j,{children:o.sub_categories.map(c=>s.jsx(u,{value:c.id.toString(),children:c.name},c.id))})]}):s.jsx("span",{children:(a==null?void 0:a.name)||"-"}):null}},{accessorKey:"make",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(p,{value:i.original.make||"",onChange:l=>{var o;i.original.make=l.target.value,(o=e==null?void 0:e.setItems)==null||o.call(e,[...n.options.data])},placeholder:"Enter make"}):s.jsx("span",{children:i.original.make||"-"})}},{accessorKey:"model",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(p,{value:i.original.model||"",onChange:l=>{var o;i.original.model=l.target.value,(o=e==null?void 0:e.setItems)==null||o.call(e,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:i.original.model||"-"})}},{accessorKey:"erasure_required",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs(x,{value:i.original.erasure_required||"",onValueChange:l=>{var o;i.original.erasure_required=l,(o=e==null?void 0:e.setItems)==null||o.call(e,[...n.options.data])},children:[s.jsx(h,{children:s.jsx(m,{placeholder:"Select option"})}),s.jsxs(j,{children:[s.jsx(u,{value:"Yes",children:"Yes"}),s.jsx(u,{value:"No",children:"No"}),s.jsx(u,{value:"N/A",children:"N/A"}),s.jsx(u,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:i.original.erasure_required||"-"})}},{id:"actions",header:({table:i})=>{const n=i.options.meta;return n!=null&&n.isEditable?"Actions":null},cell:({row:i,table:n})=>{const e=n.options.meta;if(!((e==null?void 0:e.isEditable)??!1))return null;const l=i.original.id>0;return s.jsx(b,{variant:"destructive",size:"sm",onClick:async()=>{var o,a;if(l)try{await f.delete(`/api/jobs/${i.original.job_id}/items/${i.original.id}`);const t=[...n.options.data],d=t.indexOf(i.original);t.splice(d,1),(o=e==null?void 0:e.setItems)==null||o.call(e,[...t]),E.success("Item deleted successfully")}catch(t){console.error("Error deleting item:",t),E.error("Failed to delete item")}else{const t=[...n.options.data],d=t.indexOf(i.original);t.splice(d,1),(a=e==null?void 0:e.setItems)==null||a.call(e,[...t])}},children:s.jsx(v,{className:"h-4 w-4"})})}}];export{$ as jobItemColumns};
