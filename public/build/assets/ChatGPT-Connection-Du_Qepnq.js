import{r,j as t,b as d}from"./app-CxxjQbGd.js";import{t as s}from"./index-CGbDflUn.js";import{B as f}from"./button-BfCUFj2v.js";import{I as x}from"./input-DPP4pqCX.js";import{B as P}from"./badge-BZbc9Efx.js";import"./index-DdQz_MXT.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";function k(){const[i,a]=r.useState(""),[o,n]=r.useState(!1),[h,p]=r.useState(!0),[c,l]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const u=await d.get("/settings/connections/chatgpt");u.data.connected?(n(!0),a(u.data.api_key||"")):(n(!1),a(""))}catch{n(!1),a("")}finally{p(!1)}})()},[]);const g=async()=>{l(!0);try{const e=await d.post("/settings/connections/chatgpt/connect",{api_key:i});e.status===200?(n(!0),s.success("Successfully connected to ChatGPT!")):(n(!1),console.error("Connection failed:",e.data),s.error("Failed to connect to ChatGPT. Please try again."))}catch(e){n(!1),console.error("Connection error:",e.response||e),s.error("Failed to connect to ChatGPT. Please try again.")}finally{l(!1)}},m=async()=>{try{const e=await d.post("/settings/connections/chatgpt/test",{api_key:i});e.status===200?s.success("ChatGPT connection is working!"):(console.error("Test connection failed:",e.data),s.error("Failed to test ChatGPT connection. Please try again."))}catch(e){console.error("Test connection error:",e.response||e),s.error("Failed to test ChatGPT connection. Please try again.")}},y=async()=>{l(!0);try{const e=await d.delete("/settings/connections/chatgpt");e.status===200?(n(!1),a(""),s.success("Successfully disconnected from ChatGPT.")):(console.error("Disconnect failed:",e.data),s.error("Failed to disconnect from ChatGPT. Please try again."))}catch(e){console.error("Disconnect error:",e.response||e),s.error("Failed to disconnect from ChatGPT. Please try again.")}finally{l(!1)}},C=h?"success":o?"default":"success";return t.jsxs("div",{className:"bg-white border shadow rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"ChatGPT API"}),t.jsx(P,{variant:C,children:h?"Loading...":o?"Connected":"Not Connected"})]}),!h&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:o?"Your ChatGPT API connection is active.":"Enter your ChatGPT API Key to connect and test the connection."}),t.jsx("hr",{className:"my-4"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(x,{type:"text",placeholder:"Enter API Key",value:i,onChange:e=>a(e.target.value),disabled:c||o}),t.jsxs("div",{className:"flex gap-4",children:[!o&&t.jsx(f,{onClick:g,disabled:c||!i,children:c?"Processing...":"Connect"}),o&&t.jsxs(t.Fragment,{children:[t.jsx(f,{variant:"outline",onClick:m,disabled:c,children:"Test Connection"}),t.jsx(f,{variant:"destructive",onClick:y,disabled:c,children:"Disconnect"})]})]})]})]})]})}export{k as default};
