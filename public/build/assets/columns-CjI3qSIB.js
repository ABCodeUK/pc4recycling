import{j as s,b as S}from"./app-BB65Mc1n.js";import{S as m,a as b,b as j,c as E,d as h}from"./select-Dp5Udnaz.js";import{I as u}from"./input-BdsrUm4j.js";import{B as y}from"./button-AMd0rht4.js";import{t as v}from"./index-BD8g9cTJ.js";import{M as k}from"./maximize-2-IQ1HLsfM.js";import{T as z}from"./trash-2-CyBVRyGm.js";import"./index-BD0Aflgb.js";import"./index-DJRbUwlk.js";import"./index-d89-VRCp.js";import"./index-CwOflKzf.js";import"./index-C6WAMNeG.js";import"./index-C6DuYNlM.js";import"./createLucideIcon-DhOTYlCm.js";import"./index--1ygw0mz.js";import"./index-Bax49BpN.js";import"./index-DbDOfuCE.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const H=[{accessorKey:"item_number",header:"Item #",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(u,{value:e.original.item_number,readOnly:!0,className:"w-24"}):e.original.item_number}},{accessorKey:"quantity",header:"Qty",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsxs("div",{className:"flex items-center",children:[s.jsx(u,{type:"number",min:1,value:e.original.quantity,onChange:a=>{var t;e.original.quantity=parseInt(a.target.value),(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},className:"w-20"}),s.jsx(y,{variant:"outline",size:"sm",onClick:()=>{var a;return(a=i==null?void 0:i.onExpandItem)==null?void 0:a.call(i,e.original)},className:"ml-2",children:s.jsx(k,{className:"h-4 w-4"})})]}):e.original.quantity}},{accessorKey:"category_id",header:"Category",minSize:180,cell:({row:e,table:n})=>{var c;const i=n.options.meta,r=(i==null?void 0:i.isEditable)??!1,a=(i==null?void 0:i.categories)??[],t=a.find(l=>l.id===e.original.category_id);return r?s.jsxs(m,{value:(c=e.original.category_id)==null?void 0:c.toString(),onValueChange:l=>{var o;const d=parseInt(l);e.original.category_id=d,e.original.sub_category_id=null;const g=a.find(p=>p.id===d);g!=null&&g.default_weight?e.original.weight=g.default_weight:e.original.weight=null,(o=i==null?void 0:i.setItems)==null||o.call(i,[...n.options.data])},children:[s.jsx(b,{children:s.jsx(j,{placeholder:"Select category"})}),s.jsx(E,{children:a.map(l=>s.jsx(h,{value:l.id.toString(),children:l.name},l.id))})]}):s.jsx("span",{children:(t==null?void 0:t.name)||"-"})}},{accessorKey:"sub_category_id",header:"Sub Category",minSize:180,cell:({row:e,table:n})=>{var l,d,g;const i=n.options.meta,r=(i==null?void 0:i.isEditable)??!1,t=((i==null?void 0:i.categories)??[]).find(o=>o.id===e.original.category_id),c=(l=t==null?void 0:t.sub_categories)==null?void 0:l.find(o=>o.id===e.original.sub_category_id);return(d=t==null?void 0:t.sub_categories)!=null&&d.length?r?s.jsxs(m,{value:(g=e.original.sub_category_id)==null?void 0:g.toString(),onValueChange:o=>{var _,f;const p=parseInt(o);e.original.sub_category_id=p;const x=(_=t.sub_categories)==null?void 0:_.find(I=>I.id===p);x!=null&&x.default_weight&&(e.original.weight=x.default_weight),(f=i==null?void 0:i.setItems)==null||f.call(i,[...n.options.data])},children:[s.jsx(b,{children:s.jsx(j,{placeholder:"Select sub-category"})}),s.jsx(E,{children:t.sub_categories.map(o=>s.jsx(h,{value:o.id.toString(),children:o.name},o.id))})]}):s.jsx("span",{children:(c==null?void 0:c.name)||"-"}):null}},{accessorKey:"make",header:"Make",minSize:180,cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(u,{value:e.original.make||"",onChange:a=>{var t;e.original.make=a.target.value,(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},placeholder:"Enter make"}):s.jsx("span",{children:e.original.make||"-"})}},{accessorKey:"model",header:"Model",minSize:180,cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(u,{value:e.original.model||"",onChange:a=>{var t;e.original.model=a.target.value,(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:e.original.model||"-"})}},{accessorKey:"serial_number",header:"Serial Number",minSize:180,cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(u,{value:e.original.serial_number||"",onChange:a=>{var t;e.original.serial_number=a.target.value,(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},placeholder:"Enter serial number"}):s.jsx("span",{children:e.original.serial_number||"-"})}},{accessorKey:"asset_tag",header:"Asset Tag",minSize:180,cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(u,{value:e.original.asset_tag||"",onChange:a=>{var t;e.original.asset_tag=a.target.value,(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},placeholder:"Enter asset tag"}):s.jsx("span",{children:e.original.asset_tag||"-"})}},{accessorKey:"weight",header:"Weight (kg)",minSize:100,cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(u,{value:e.original.weight||"",onChange:a=>{var t;e.original.weight=a.target.value,(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},placeholder:"Enter weight"}):s.jsx("span",{children:e.original.weight||"-"})}},{accessorKey:"erasure_required",header:"Erasure Required",minSize:180,cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsxs(m,{value:e.original.erasure_required||"",onValueChange:a=>{var t;e.original.erasure_required=a,(t=i==null?void 0:i.setItems)==null||t.call(i,[...n.options.data])},children:[s.jsx(b,{children:s.jsx(j,{placeholder:"Select option"})}),s.jsxs(E,{children:[s.jsx(h,{value:"Yes",children:"Yes"}),s.jsx(h,{value:"No",children:"No"}),s.jsx(h,{value:"N/A",children:"N/A"}),s.jsx(h,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:e.original.erasure_required||"-"})}},{id:"actions",header:({table:e})=>{const n=e.options.meta;return n!=null&&n.isEditable?"Actions":null},cell:({row:e,table:n})=>{const i=n.options.meta;if(!((i==null?void 0:i.isEditable)??!1))return null;const a=e.original.id>0;return s.jsx(y,{variant:"destructive",size:"sm",onClick:async()=>{var t,c;if(a)try{await S.delete(`/api/jobs/${e.original.job_id}/items/${e.original.id}`);const l=[...n.options.data],d=l.indexOf(e.original);l.splice(d,1),(t=i==null?void 0:i.setItems)==null||t.call(i,[...l]),v.success("Item deleted successfully")}catch(l){console.error("Error deleting item:",l),v.error("Failed to delete item")}else{const l=[...n.options.data],d=l.indexOf(e.original);l.splice(d,1),(c=i==null?void 0:i.setItems)==null||c.call(i,[...l])}},children:s.jsx(z,{className:"h-4 w-4"})})}}];export{H as jobItemColumns};
