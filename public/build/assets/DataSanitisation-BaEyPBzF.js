import{r as i,j as e,b}from"./app-CNWjOMNx.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as x,e as j,f as S}from"./breadcrumb-BRBq9mE3.js";import{S as F}from"./separator-BPue9knr.js";import{B as o}from"./button-Cif8vmUM.js";import{I as N}from"./input-CKARXW-H.js";import{L as E}from"./label-EHUiVpis.js";import{DataTable as se}from"./data-table-V2RaAAoJ.js";import{columns as ae}from"./columns-e3pRkGmu.js";import te from"./VariablesNavigation-CNyR4bNM.js";import{D as k,a as ie,b as T,c as I,d as B,e as P,f as L}from"./dialog-BfgzRhkV.js";import{A as re,a as ne,b as oe,c as le,d as de,e as ce,f as me,g as he,h as pe}from"./alert-dialog-BBmyk8cd.js";import{t as r}from"./index-DROTMuiR.js";import{S as xe}from"./square-pen-DthIdKap.js";import{T as je}from"./trash-2-UOQr6mTH.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-DUDCROMg.js";import"./index-CmDO7QdU.js";import"./index-D-4-NTWd.js";import"./index-DPKFiV9N.js";import"./index-BHpFse_T.js";import"./index-CNsmnkFI.js";import"./createLucideIcon-ClQ1hqbp.js";import"./index-BJMVI5o3.js";import"./index-BqYSSVB3.js";import"./index-CnljWFNF.js";import"./index-D0kbjZ6r.js";import"./calendar-BUGi4wxL.js";import"./table-B5rCecqS.js";import"./select-DyBRev3z.js";import"./index-BflIAMo0.js";import"./arrow-up-down-B8GbFRXv.js";import"./tabs-plg5bBI7.js";function Qe({dataSanitisationOptions:V}){const[z,g]=i.useState(V),[v,C]=i.useState({ds_name:""}),[A,w]=i.useState({ds_name:""}),[d,c]=i.useState({ds_name:""}),[y,H]=i.useState(""),[ge,m]=i.useState(!1),[u,_]=i.useState(null),[$,f]=i.useState(!1),[q,h]=i.useState(!1),p=()=>c({ds_name:""}),D=()=>{C({ds_name:""}),p()},O=(s,a)=>{const{name:t,value:n}=s.target;a==="add"?C(l=>({...l,[t]:n})):w(l=>({...l,[t]:n})),c(l=>({...l,[t]:""}))},M=s=>H(s.target.value),R=async()=>{p();try{m(!0);const s=await b.post("/settings/variables/data-sanitisation",v);if(s.status===200){const a=s.data;g(t=>[...t,a]),D(),f(!1),r.success("Data Sanitisation option successfully created!")}else r.error("Failed to create Data Sanitisation option. Please try again.")}catch(s){s.response&&s.response.data.errors?c(s.response.data.errors):r.error("Error creating Data Sanitisation option. Please check the logs.")}finally{m(!1)}},U=async()=>{if(u){p();try{m(!0);const s=await b.put(`/settings/variables/data-sanitisation/${u}`,A);if(s.status===200){const a=s.data;g(t=>t.map(n=>n.id===u?a:n)),_(null),h(!1),r.success("Data Sanitisation option successfully updated!")}else r.error("Failed to update Data Sanitisation option. Please try again.")}catch(s){s.response&&s.response.data.errors?c(s.response.data.errors):r.error("Error updating Data Sanitisation option. Please check the logs.")}finally{m(!1)}}},W=async s=>{try{(await b.delete(`/settings/variables/data-sanitisation/${s}`)).status===200?(g(t=>t.filter(n=>n.id!==s)),r.success("Data Sanitisation option successfully deleted!")):r.error("Failed to delete Data Sanitisation option. Please try again.")}catch{r.error("Error deleting Data Sanitisation option. Please check the logs.")}},G=z.filter(s=>s.ds_name.toLowerCase().includes(y.toLowerCase())),J=[...ae,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{w({ds_name:a.ds_name}),p(),_(a.id),h(!0)},children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(o,{variant:"destructive",size:"sm",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(oe,{children:[e.jsxs(le,{children:[e.jsx(de,{children:"Confirm Deletion"}),e.jsxs(ce,{children:["Are you sure you want to delete Data Sanitisation option"," ",e.jsx("b",{children:a.ds_name}),"?"]})]}),e.jsxs(me,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(pe,{onClick:()=>W(a.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(F,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(x,{children:e.jsx(j,{href:"/",children:"Dashboard"})}),e.jsx(S,{className:"hidden md:block"}),e.jsx(x,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(S,{className:"hidden md:block"}),e.jsx(x,{children:e.jsx(j,{href:"/settings/variables",children:"Variables"})}),e.jsx(S,{className:"hidden md:block"}),e.jsx(x,{children:e.jsx(j,{href:"/settings/variables/data-sanitisation",children:"Data Sanitisation"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(te,{currentTab:"data-sanitisation"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage Data Sanitisation Options"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete Data Sanitisation options used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{placeholder:"Search Data Sanitisation Options...",value:y,onChange:M,className:"max-w-sm"}),e.jsxs(k,{open:$,onOpenChange:s=>{s||D(),f(s)},children:[e.jsx(ie,{asChild:!0,children:e.jsx(o,{children:"Add Data Sanitisation Option"})}),e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Add Data Sanitisation Option"}),e.jsx(P,{children:"Fill in the details for the new Data Sanitisation option below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"ds_name",children:["Option Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{id:"ds_name",name:"ds_name",value:v.ds_name,onChange:s=>O(s,"add")}),d.ds_name&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ds_name})]})})}),e.jsxs(L,{children:[e.jsx(o,{variant:"outline",onClick:()=>{D(),f(!1)},children:"Cancel"}),e.jsx(o,{onClick:R,children:"Create Option"})]})]})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(k,{open:q,onOpenChange:h,children:e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Edit Data Sanitisation Option"}),e.jsx(P,{children:"Update the details for the Data Sanitisation option below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsxs(E,{htmlFor:"ds_name_edit",children:["Option Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{id:"ds_name_edit",name:"ds_name",value:A.ds_name,onChange:s=>O(s,"edit")}),d.ds_name&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ds_name})]})})}),e.jsxs(L,{children:[e.jsx(o,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(o,{onClick:U,children:"Save Changes"})]})]})})]})]})]})}export{Qe as default};
