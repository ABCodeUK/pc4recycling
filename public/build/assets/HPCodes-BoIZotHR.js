import{r as i,j as e,b as w}from"./app-DGedXpK6.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as C,e as y,f as P}from"./breadcrumb-DVHq5Awm.js";import{S as F}from"./separator-Qg1edzKM.js";import{B as n}from"./button-DjXm1grC.js";import{I as x}from"./input-CkBA5yRJ.js";import{L as m}from"./label-Ct80BZdK.js";import{DataTable as se}from"./data-table-CLAY7t_l.js";import{columns as te}from"./columns-DTezYJoc.js";import re from"./VariablesNavigation-ByQFXGMN.js";import{D as k,a as ae,b as T,c as E,d as I,e as L,f as B}from"./dialog-CjHGOGdp.js";import{A as ie,a as de,b as oe,c as le,d as ne,e as ce,f as he,g as pe,h as me}from"./alert-dialog-FwAlGMcx.js";import{t as d}from"./index-B34HRg7w.js";import{S as xe}from"./square-pen-DAP9x76s.js";import{T as je}from"./trash-2-CE_77rkt.js";import"./index-Dx4p5O6H.js";import"./index-BOJ2gww-.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-D1brpkaJ.js";import"./createLucideIcon-C-iaKTyE.js";import"./index-BNfd2_2U.js";import"./index-CLFtQT3G.js";import"./index-Crf3phMa.js";import"./index-B_qNjpXx.js";import"./index-CvV_Mgk0.js";import"./index-DYpMfZUf.js";import"./table-Cj_Afe3x.js";import"./select-DuTKz2sq.js";import"./arrow-up-down-DEJ3A0Ha.js";import"./tabs-BDf_6eYd.js";function Ge({hpCodes:O}){const[V,v]=i.useState(O),[c,S]=i.useState({hp_code:"",hp_type:"",hp_description:""}),[h,H]=i.useState({hp_code:"",hp_type:"",hp_description:""}),[r,j]=i.useState({hp_code:"",hp_type:"",hp_description:""}),[u,z]=i.useState(""),[ue,g]=i.useState(!1),[N,A]=i.useState(null),[$,_]=i.useState(!1),[q,f]=i.useState(!1),b=()=>{j({hp_code:"",hp_type:"",hp_description:""})},D=()=>{S({hp_code:"",hp_type:"",hp_description:""}),b()},p=(s,t)=>{const{name:a,value:o}=s.target;t==="add"?S(l=>({...l,[a]:o})):H(l=>({...l,[a]:o})),j(l=>({...l,[a]:""}))},M=s=>{z(s.target.value)},R=async()=>{b();const s={hp_code:c.hp_code,hp_type:c.hp_type,hp_description:c.hp_description||""};try{g(!0);const t=await w.post("/settings/variables/hp-codes",s);if(t.status===200){const a=t.data;v(o=>[...o,a]),D(),_(!1),d.success("HP Code successfully created!")}else d.error("Failed to create HP Code. Please try again.")}catch(t){t.response&&t.response.data.errors?j(t.response.data.errors):d.error("Error creating HP Code. Please check the logs.")}finally{g(!1)}},U=async()=>{if(!N)return;b();const s={hp_code:h.hp_code,hp_type:h.hp_type,hp_description:h.hp_description||""};try{g(!0);const t=await w.put(`/settings/variables/hp-codes/${N}`,s);if(t.status===200){const a=t.data;v(o=>o.map(l=>l.id===N?a:l)),A(null),f(!1),d.success("HP Code successfully updated!")}else d.error("Failed to update HP Code. Please try again.")}catch(t){t.response&&t.response.data.errors?j(t.response.data.errors):d.error("Error updating HP Code. Please check the logs.")}finally{g(!1)}},W=async s=>{try{(await w.delete(`/settings/variables/hp-codes/${s}`)).status===200?(v(a=>a.filter(o=>o.id!==s)),d.success("HP Code successfully deleted!")):d.error("Failed to delete HP Code. Please try again.")}catch{d.error("Error deleting HP Code. Please check the logs.")}},G=V.filter(s=>s.hp_code.toLowerCase().includes(u.toLowerCase())||s.hp_type.toLowerCase().includes(u.toLowerCase())||s.hp_description.toLowerCase().includes(u.toLowerCase())),J=[...te,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{H({hp_code:t.hp_code,hp_type:t.hp_type,hp_description:t.hp_description}),b(),A(t.id),f(!0)},children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsxs(ie,{children:[e.jsx(de,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(oe,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:"Confirm Deletion"}),e.jsxs(ce,{children:["Are you sure you want to delete HP Code ",e.jsx("b",{children:t.hp_code}),"?"]})]}),e.jsxs(he,{children:[e.jsx(pe,{children:"Cancel"}),e.jsx(me,{onClick:()=>W(t.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(F,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(C,{children:e.jsx(y,{href:"/",children:"Dashboard"})}),e.jsx(P,{className:"hidden md:block"}),e.jsx(C,{children:e.jsx(y,{href:"/settings",children:"Settings"})}),e.jsx(P,{className:"hidden md:block"}),e.jsx(C,{children:e.jsx(y,{href:"/settings/variables",children:"Variables"})}),e.jsx(P,{className:"hidden md:block"}),e.jsx(C,{children:e.jsx(y,{href:"/settings/variables/hp-codes",children:"HP Codes"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(re,{currentTab:"hp-codes"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage HP Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete HP codes used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{placeholder:"Search HP Codes...",value:u,onChange:M,className:"max-w-sm"}),e.jsxs(k,{open:$,onOpenChange:s=>{s||D(),_(s)},children:[e.jsx(ae,{asChild:!0,children:e.jsx(n,{onClick:()=>_(!0),children:"Add HP Code"})}),e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(E,{children:[e.jsx(I,{children:"Add HP Code"}),e.jsx(L,{children:"Fill in the details for the new HP Code below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"hp_code",children:["HP Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{id:"hp_code",name:"hp_code",value:c.hp_code,onChange:s=>p(s,"add")}),r.hp_code&&e.jsx("p",{className:"text-red-600 text-sm",children:r.hp_code})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"hp_type",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{id:"hp_type",name:"hp_type",value:c.hp_type,onChange:s=>p(s,"add")}),r.hp_type&&e.jsx("p",{className:"text-red-600 text-sm",children:r.hp_type})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"hp_description",children:"Description"}),e.jsx("textarea",{id:"hp_description",name:"hp_description",value:c.hp_description,onChange:s=>p(s,"add"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.hp_description&&e.jsx("p",{className:"text-red-600 text-sm",children:r.hp_description})]})]})]}),e.jsxs(B,{children:[e.jsx(n,{variant:"outline",onClick:()=>{D(),_(!1)},children:"Cancel"}),e.jsx(n,{onClick:R,children:"Create HP Code"})]})]})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(k,{open:q,onOpenChange:f,children:e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(E,{children:[e.jsx(I,{children:"Edit HP Code"}),e.jsx(L,{children:"Update the details for the HP Code below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"hp_code_edit",children:["HP Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{id:"hp_code_edit",name:"hp_code",value:h.hp_code,onChange:s=>p(s,"edit")}),r.hp_code&&e.jsx("p",{className:"text-red-600 text-sm",children:r.hp_code})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"hp_type_edit",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{id:"hp_type_edit",name:"hp_type",value:h.hp_type,onChange:s=>p(s,"edit")}),r.hp_type&&e.jsx("p",{className:"text-red-600 text-sm",children:r.hp_type})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"hp_description_edit",children:"Description"}),e.jsx("textarea",{id:"hp_description_edit",name:"hp_description",value:h.hp_description,onChange:s=>p(s,"edit"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.hp_description&&e.jsx("p",{className:"text-red-600 text-sm",children:r.hp_description})]})]})]}),e.jsxs(B,{children:[e.jsx(n,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(n,{onClick:U,children:"Save Changes"})]})]})})]})]})]})}export{Ge as default};
