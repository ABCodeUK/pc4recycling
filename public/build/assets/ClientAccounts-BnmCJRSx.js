import{r as i,j as e,b as I}from"./app-DGedXpK6.js";import{S as L,A as T,a as k,b as O,B as P,c as $,d as w,e as N,f as q}from"./breadcrumb-DVHq5Awm.js";import{S as v}from"./separator-Qg1edzKM.js";import{B as l}from"./button-DjXm1grC.js";import{I as c}from"./input-CkBA5yRJ.js";import{L as j}from"./label-Ct80BZdK.js";import{DataTable as z}from"./data-table-C-pdtW9X.js";import{columns as H}from"./columns-B03Nb5UG.js";import{D as M,a as R,b as U,c as W,d as G,e as J,f as K}from"./dialog-CjHGOGdp.js";import{t as f}from"./index-B34HRg7w.js";import{E as Q}from"./eye-BuRBKHcU.js";import"./index-Dx4p5O6H.js";import"./index-BOJ2gww-.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-D1brpkaJ.js";import"./createLucideIcon-C-iaKTyE.js";import"./index-BNfd2_2U.js";import"./index-CLFtQT3G.js";import"./index-Crf3phMa.js";import"./index-B_qNjpXx.js";import"./index-CvV_Mgk0.js";import"./index-DYpMfZUf.js";import"./table-Cj_Afe3x.js";import"./select-DuTKz2sq.js";import"./arrow-up-down-DEJ3A0Ha.js";function De({clients:S,currentUserId:V}){const[D,X]=i.useState(S),[o,g]=i.useState({name:"",email:"",contact_name:""}),[n,m]=i.useState({name:"",email:"",contact_name:""}),[d,A]=i.useState(""),[Y,b]=i.useState(!1),[_,h]=i.useState(!1),C=()=>m({name:"",email:"",contact_name:""}),x=()=>{g({name:"",email:"",contact_name:""}),C()},p=s=>{const{name:t,value:a}=s.target;g(r=>({...r,[t]:a})),m(r=>({...r,[t]:""}))},y=s=>{A(s.target.value)},F=async()=>{var s,t;C();try{b(!0);const a=Math.random().toString(36).slice(-8),r={name:o.name,email:o.email,contact_name:o.contact_name,password:a,password_confirmation:a},u=await I.post("/customers/store",r);u.data&&(f.success("Client successfully added!"),h(!1),x(),u.data.id&&(window.location.href=`/customers/${u.data.id}/edit`))}catch(a){(t=(s=a.response)==null?void 0:s.data)!=null&&t.errors?(m(a.response.data.errors),Object.values(a.response.data.errors).forEach(r=>{f.error(r[0])})):f.error("Failed to add client.")}finally{b(!1)}},B=D.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())||s.email.toLowerCase().includes(d.toLowerCase())),E=[...H,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const t=s.original;return e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/customers/${t.id}`,children:e.jsx(Q,{className:"h-4 w-4"})})})}}];return e.jsxs(L,{children:[e.jsx(T,{}),e.jsxs(k,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(O,{className:"-ml-1"}),e.jsx(v,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(P,{children:e.jsxs($,{children:[e.jsx(w,{children:e.jsx(N,{href:"/",children:"Dashboard"})}),e.jsx(q,{}),e.jsx(w,{children:e.jsx(N,{href:"/customers",children:"Customers"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Customers"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Customers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Below is a list of all customers on the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{placeholder:"Search Customers...",value:d,onChange:y,className:"max-w-sm"}),e.jsxs(M,{open:_,onOpenChange:s=>{s||x(),h(s)},children:[e.jsx(R,{asChild:!0,children:e.jsx(l,{children:"Add New Customer"})}),e.jsxs(U,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(W,{children:[e.jsx(G,{children:"Add new customer"}),e.jsx(J,{children:"Fill in the details for the new client below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",children:"Company Name"}),e.jsx(c,{id:"name",name:"name",value:o.name,onChange:p}),n.name&&e.jsx("p",{className:"text-red-600 text-sm",children:n.name})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"contact_name",children:"Contact Name"}),e.jsx(c,{id:"contact_name",name:"contact_name",value:o.contact_name,onChange:p,required:!0}),n.contact_name&&e.jsx("p",{className:"text-red-600 text-sm",children:n.contact_name})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",name:"email",value:o.email,onChange:p}),n.email&&e.jsx("p",{className:"text-red-600 text-sm",children:n.email})]})]})}),e.jsxs(K,{children:[e.jsx(l,{variant:"outline",onClick:()=>{x(),h(!1)},children:"Cancel"}),e.jsx(l,{onClick:F,children:"Create Client"})]})]})]})]})]}),e.jsx(v,{className:"my-4"}),e.jsx(z,{columns:E,data:B})]})]})]})]})}export{De as default};
