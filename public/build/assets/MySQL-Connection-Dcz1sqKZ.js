import{r as d,j as e,b as p}from"./app-DGedXpK6.js";import{t as c}from"./index-B34HRg7w.js";import{B as h}from"./button-DjXm1grC.js";import{I as l}from"./input-CkBA5yRJ.js";import{B as v}from"./badge-D5z1vypp.js";import"./index-B_qNjpXx.js";import"./index-Dx4p5O6H.js";import"./index-BOJ2gww-.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";function D(){const[t,o]=d.useState({host:"",port:"",database:"",username:"",password:""}),[a,r]=d.useState(!1),[m,y]=d.useState(!0),[n,u]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const i=await p.get("/settings/connections/mysql");i.data.connected?(r(!0),o({host:i.data.host,port:i.data.port,database:i.data.database,username:i.data.username,password:""})):r(!1)}catch{r(!1)}finally{y(!1)}})()},[]);const f=async()=>{try{(await p.post("/settings/connections/mysql/test",t)).status===200&&c.success("MySQL connection is working!")}catch{c.error("Failed to test MySQL connection. Please check the details and try again.")}},g=async()=>{u(!0);try{(await p.post("/settings/connections/mysql/save",t)).status===200&&(r(!0),c.success("MySQL connection saved successfully!"))}catch{c.error("Failed to save MySQL connection. Please try again.")}finally{u(!1)}},x=async()=>{u(!0);try{(await p.delete("/settings/connections/mysql")).status===200&&(r(!1),o({host:"",port:"",database:"",username:"",password:""}),c.success("Disconnected from MySQL."))}catch{c.error("Failed to disconnect from MySQL.")}finally{u(!1)}},b=m?"success":a?"default":"success";return e.jsxs("div",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Aitken MySQL"}),e.jsx(v,{variant:b,children:m?"Loading...":a?"Connected":"Not Connected"})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a?"Your Aitken MySQL connection is active.":"Enter your Aitken MySQL database details to connect."}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{type:"text",placeholder:"Host",value:t.host,onChange:s=>o({...t,host:s.target.value}),disabled:n||a}),e.jsx(l,{type:"text",placeholder:"Port",value:t.port,onChange:s=>o({...t,port:s.target.value}),disabled:n||a}),e.jsx(l,{type:"text",placeholder:"Database",value:t.database,onChange:s=>o({...t,database:s.target.value}),disabled:n||a}),e.jsx(l,{type:"text",placeholder:"Username",value:t.username,onChange:s=>o({...t,username:s.target.value}),disabled:n||a}),e.jsx(l,{type:"password",placeholder:a?"Password hidden for security":"Password",value:t.password,onChange:s=>o({...t,password:s.target.value}),disabled:n||a}),e.jsxs("div",{className:"flex gap-4",children:[!a&&e.jsx(h,{onClick:g,disabled:n,children:n?"Saving...":"Connect"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"outline",onClick:f,disabled:n,children:"Test Connection"}),e.jsx(h,{variant:"destructive",onClick:x,disabled:n,children:"Disconnect"})]})]})]})]})]})}export{D as default};
