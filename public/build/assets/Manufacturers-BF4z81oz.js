import{r as u,j as e,b as A}from"./app-CxxjQbGd.js";import{S as X,A as Y,a as Z,b as ee,B as ae,c as re,d as b,e as v,f as F}from"./breadcrumb-CVfpatPu.js";import{S as L}from"./separator-OWjsBv_k.js";import{B as o}from"./button-BfCUFj2v.js";import{I as m}from"./input-DPP4pqCX.js";import{L as f}from"./label-2wttpgDy.js";import{DataTable as te}from"./data-table-CQXpWvon.js";import{columns as se}from"./columns-TVBMdp4u.js";import ne from"./VariablesNavigation-BdyRv2HG.js";import{D as T,a as le,b as k,c as I,d as P,e as B,f as O}from"./dialog-0RdKrRPh.js";import{A as ce,a as ue,b as ie,c as oe,d as me,e as de,f as fe,g as xe,h as he}from"./alert-dialog-IHHWyKpT.js";import{t as i}from"./index-CGbDflUn.js";import{S as ge}from"./square-pen-DlkBvHz6.js";import{T as pe}from"./trash-2-BuUhqBcA.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-uXkLkjFM.js";import"./createLucideIcon-YMZQpf5O.js";import"./index-CpwjmW8Z.js";import"./Combination-DnQhWoyI.js";import"./index-Drt13xjj.js";import"./index-DdQz_MXT.js";import"./index-Dy7fGhxC.js";import"./index-BlL_lDRx.js";import"./index---YqbKSt.js";import"./table-B3GsT3Yk.js";import"./select-CnJHFvlZ.js";import"./arrow-up-down-BHNPgGYQ.js";const je="/placeholder-logo.png";function Je({manufacturers:R}){const[z,D]=u.useState(R),[d,C]=u.useState({manufacturer_name:"",manufacturer_logo:null,manufacturer_url:""}),[l,h]=u.useState({manufacturer_name:"",manufacturer_logo:null,manufacturer_url:"",existing_logo:""}),[s,x]=u.useState({manufacturer_name:"",manufacturer_logo:"",manufacturer_url:""}),[N,W]=u.useState(""),[_e,g]=u.useState(!1),[y,w]=u.useState(null),[H,p]=u.useState(!1),[V,j]=u.useState(!1),S=()=>{x({manufacturer_name:"",manufacturer_logo:"",manufacturer_url:""})},M=()=>{C({manufacturer_name:"",manufacturer_logo:null,manufacturer_url:""}),S()},_=(a,r)=>{const{name:n,value:c}=a.target;r==="add"?C(t=>({...t,[n]:c})):h(t=>({...t,[n]:c})),x(t=>({...t,[n]:""}))},E=(a,r)=>{var c;const n=((c=a.target.files)==null?void 0:c[0])||null;r==="add"?C(t=>({...t,manufacturer_logo:n})):h(t=>({...t,manufacturer_logo:n})),x(t=>({...t,manufacturer_logo:""}))},$=()=>{h(a=>({...a,manufacturer_logo:null,existing_logo:""}))},q=a=>{W(a.target.value)},G=async()=>{S();const a=new FormData;a.append("manufacturer_name",d.manufacturer_name),d.manufacturer_logo&&a.append("manufacturer_logo",d.manufacturer_logo),a.append("manufacturer_url",d.manufacturer_url);try{g(!0);const r=await A.post("/settings/variables/manufacturers",a,{headers:{"Content-Type":"multipart/form-data"}});if(r.status===200){const n=r.data;D(c=>[...c,n]),M(),p(!1),i.success("Manufacturer successfully created!")}else i.error("Failed to create Manufacturer. Please try again.")}catch(r){r.response&&r.response.data.errors?x(r.response.data.errors):i.error("Error creating Manufacturer. Please check the logs.")}finally{g(!1)}},K=async()=>{if(!y)return;S();const a=new FormData;a.append("manufacturer_name",l.manufacturer_name),l.manufacturer_logo&&a.append("manufacturer_logo",l.manufacturer_logo),!l.existing_logo&&!l.manufacturer_logo&&a.append("remove_logo","true"),a.append("manufacturer_url",l.manufacturer_url||"");try{g(!0);const r=await A.post(`/settings/variables/manufacturers/${y}`,a,{headers:{"Content-Type":"multipart/form-data"}});if(r.status===200){const n=r.data;D(c=>c.map(t=>t.id===y?n:t)),w(null),j(!1),i.success("Manufacturer successfully updated!")}else i.error("Failed to update Manufacturer. Please try again.")}catch(r){r.response&&r.response.data.errors?x(r.response.data.errors):i.error("Error updating Manufacturer. Please check the logs.")}finally{g(!1)}},U=async a=>{try{(await A.delete(`/settings/variables/manufacturers/${a}`)).status===200?(D(n=>n.filter(c=>c.id!==a)),i.success("Manufacturer successfully deleted!")):i.error("Failed to delete Manufacturer. Please try again.")}catch{i.error("Error deleting Manufacturer. Please check the logs.")}},J=z.filter(a=>{var r;return a.manufacturer_name.toLowerCase().includes(N.toLowerCase())||(((r=a.manufacturer_url)==null?void 0:r.toLowerCase())||"").includes(N.toLowerCase())}),Q=[...se.filter(a=>a.id!=="manufacturer_url"),{id:"manufacturer_url",header:"Website",accessorKey:"manufacturer_url",cell:({row:a})=>e.jsx("a",{href:a.original.manufacturer_url||"#",target:"_blank",rel:"noopener noreferrer",className:a.original.manufacturer_url?"text-blue-500 underline":"text-gray-500",children:a.original.manufacturer_url||""})},{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:a})=>{const r=a.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{h({manufacturer_name:r.manufacturer_name,manufacturer_logo:null,manufacturer_url:r.manufacturer_url||"",existing_logo:r.manufacturer_logo||je}),w(r.id),j(!0)},children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsxs(ce,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(o,{variant:"destructive",size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs(ie,{children:[e.jsxs(oe,{children:[e.jsx(me,{children:"Confirm Deletion"}),e.jsxs(de,{children:["Are you sure you want to delete Manufacturer"," ",e.jsx("b",{children:r.manufacturer_name}),"?"]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:"Cancel"}),e.jsx(he,{onClick:()=>U(r.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(X,{children:[e.jsx(Y,{}),e.jsxs(Z,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(ee,{className:"-ml-1"}),e.jsx(L,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(ae,{children:e.jsxs(re,{children:[e.jsx(b,{children:e.jsx(v,{href:"/",children:"Dashboard"})}),e.jsx(F,{}),e.jsx(b,{children:e.jsx(v,{href:"/settings",children:"Settings"})}),e.jsx(F,{}),e.jsx(b,{children:e.jsx(v,{href:"/settings/variables",children:"Variables"})}),e.jsx(F,{}),e.jsx(b,{children:e.jsx(v,{href:"/settings/variables/manufacturers",children:"Manufacturers"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(ne,{currentTab:"manufacturers"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage Manufacturers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete manufacturers."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{placeholder:"Search Manufacturers...",value:N,onChange:q,className:"max-w-sm"}),e.jsxs(T,{open:H,onOpenChange:a=>{a||M(),p(a)},children:[e.jsx(le,{asChild:!0,children:e.jsx(o,{onClick:()=>p(!0),children:"Add Manufacturer"})}),e.jsxs(k,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(P,{children:"Add Manufacturer"}),e.jsx(B,{children:"Recommended logo size: 100x100 pixels."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"manufacturer_name",children:["Name",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(m,{id:"manufacturer_name",name:"manufacturer_name",value:d.manufacturer_name,onChange:a=>_(a,"add")}),s.manufacturer_name&&e.jsx("p",{className:"text-red-600 text-sm",children:s.manufacturer_name})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"manufacturer_logo",children:"Logo"}),e.jsx(m,{type:"file",id:"manufacturer_logo",name:"manufacturer_logo",onChange:a=>E(a,"add")}),s.manufacturer_logo&&e.jsx("p",{className:"text-red-600 text-sm",children:s.manufacturer_logo})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"manufacturer_url",children:"Website"}),e.jsx(m,{id:"manufacturer_url",name:"manufacturer_url",value:d.manufacturer_url,onChange:a=>_(a,"add")}),s.manufacturer_url&&e.jsx("p",{className:"text-red-600 text-sm",children:s.manufacturer_url})]})]}),e.jsxs(O,{children:[e.jsx(o,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(o,{onClick:G,children:"Create Manufacturer"})]})]})]})]})]}),e.jsx(L,{className:"my-4"}),e.jsx(te,{columns:Q,data:J})]}),e.jsx(T,{open:V,onOpenChange:j,children:e.jsxs(k,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(P,{children:"Edit Manufacturer"}),e.jsx(B,{children:"Recommended logo size: 100x100 pixels."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsxs(f,{htmlFor:"manufacturer_name_edit",children:["Name",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(m,{id:"manufacturer_name_edit",name:"manufacturer_name",value:l.manufacturer_name,onChange:a=>_(a,"edit")}),s.manufacturer_name&&e.jsx("p",{className:"text-red-600 text-sm",children:s.manufacturer_name})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"manufacturer_logo_edit",children:"Logo"}),l.existing_logo&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:l.existing_logo,alt:"Current logo",className:"w-16 h-16 object-contain border"}),e.jsx(o,{variant:"destructive",size:"sm",onClick:$,children:"Remove"})]}),!l.existing_logo&&e.jsx(m,{type:"file",id:"manufacturer_logo_edit",name:"manufacturer_logo",onChange:a=>E(a,"edit")}),s.manufacturer_logo&&e.jsx("p",{className:"text-red-600 text-sm",children:s.manufacturer_logo})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"manufacturer_url_edit",children:"Website"}),e.jsx(m,{id:"manufacturer_url_edit",name:"manufacturer_url",value:l.manufacturer_url,onChange:a=>_(a,"edit")}),s.manufacturer_url&&e.jsx("p",{className:"text-red-600 text-sm",children:s.manufacturer_url})]})]}),e.jsxs(O,{children:[e.jsx(o,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(o,{onClick:K,children:"Save Changes"})]})]})})]})]})]})}export{Je as default};
