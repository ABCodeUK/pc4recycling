import{j as e,r as h,b as x}from"./app-CxxjQbGd.js";import{S as U,A as z,a as G,b as J,B as K,c as Q,d as f,e as j,f as b}from"./breadcrumb-CVfpatPu.js";import{S as v}from"./separator-OWjsBv_k.js";import{B as c}from"./button-BfCUFj2v.js";import{I as d}from"./input-DPP4pqCX.js";import{L as o}from"./label-2wttpgDy.js";import{S as W,a as X,b as Y,c as Z,d as _}from"./select-CnJHFvlZ.js";import{S as ee}from"./switch-DN0b9m47.js";import{A as D,a as F,b as E,c as R,d as k,e as B,f as T,g as I,h as L}from"./alert-dialog-IHHWyKpT.js";import{t as a}from"./index-CGbDflUn.js";import{A as se}from"./arrow-left-BksZfyPd.js";import{S as re}from"./save-CPnrAY8Z.js";import{T as ae}from"./trash-2-BuUhqBcA.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-uXkLkjFM.js";import"./createLucideIcon-YMZQpf5O.js";import"./index-CpwjmW8Z.js";import"./Combination-DnQhWoyI.js";import"./index-Drt13xjj.js";import"./index-DdQz_MXT.js";import"./index-Dy7fGhxC.js";import"./index-BlL_lDRx.js";import"./index---YqbKSt.js";function Fe({user_edit:t,roles:N}){var C;if(!t)return e.jsx("div",{children:"Loading..."});const[n,u]=h.useState({name:t.name||"",email:t.email||"",mobile:t.mobile||"",position:t.position||"",active:t.active||!1,role_id:String(t.role_id)||""}),[l,p]=h.useState({newPassword:"",confirmPassword:""}),[m,S]=h.useState({name:"",email:"",role_id:""}),[y,P]=h.useState(!1),A=()=>S({name:"",email:"",role_id:""}),g=s=>{const{name:r,value:i}=s.target;u(w=>({...w,[r]:i})),A()},M=s=>{u(r=>({...r,active:s}))},$=async()=>{var s,r;A();try{P(!0),(await x.put(`/settings/staff/update/${t.id}`,n)).status===200?a.success("Staff member successfully updated!"):a.error("Failed to update staff member. Please try again.")}catch(i){(r=(s=i.response)==null?void 0:s.data)!=null&&r.errors?S(i.response.data.errors):a.error("An error occurred while updating the staff member.")}finally{P(!1)}},q=async()=>{try{(await x.delete(`/settings/staff/delete/${t.id}`)).status===200?(a.success("Staff account successfully deleted!"),window.location.href="/settings/staff"):a.error("Failed to delete account. Please try again.")}catch{a.error("An error occurred while deleting the account.")}},V=async()=>{try{(await x.post(`/settings/staff/${t.id}/send-reset-email`)).status===200?a.success("Password reset email sent successfully."):a.error("Failed to send password reset email.")}catch{a.error("An error occurred while sending the password reset email.")}},H=async()=>{var s,r;if(l.newPassword!==l.confirmPassword){a.error("Passwords do not match.");return}try{await x.post(`/settings/staff/${t.id}/reset-password`,{password:l.newPassword,password_confirmation:l.confirmPassword}),a.success("Password reset successfully."),p({newPassword:"",confirmPassword:""})}catch(i){if((r=(s=i.response)==null?void 0:s.data)!=null&&r.errors){const w=i.response.data.errors;Object.values(w).forEach(O=>{a.error(O[0])})}else a.error("An error occurred while resetting the password.")}};return e.jsxs(U,{children:[e.jsx(z,{}),e.jsxs(G,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(J,{className:"-ml-1"}),e.jsx(v,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(K,{children:e.jsxs(Q,{children:[e.jsx(f,{children:e.jsx(j,{href:"/",children:"Dashboard"})}),e.jsx(b,{}),e.jsx(f,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(b,{}),e.jsx(f,{children:e.jsx(j,{href:"/settings/staff",children:"Staff Accounts"})}),e.jsx(b,{}),e.jsx(f,{children:e.jsx(j,{href:"#",children:"Edit Staff Account"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Edit Staff Account"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(c,{variant:"outline",onClick:()=>window.location.href="/settings/staff/",children:[e.jsx(se,{className:"h-6 w-6 mr-0"}),"Done Editing"]}),e.jsx(c,{className:"bg-green-500 text-white hover:bg-green-600 focus:ring-2 focus:ring-green-400",onClick:$,disabled:y,children:y?e.jsx("span",{children:"Saving..."}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-5 w-5"}),"Save Changes"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Staff Details"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Update the personal and professional details of the staff member."}),e.jsx(v,{}),e.jsxs("div",{className:"grid gap-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(o,{htmlFor:"name",className:"text-left",children:"Name*"}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(d,{id:"name",name:"name",value:n.name,onChange:g,required:!0}),m.name&&e.jsx("p",{className:"text-red-600 text-sm",children:m.name})]})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(o,{htmlFor:"email",className:"text-left",children:"Email*"}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(d,{id:"email",name:"email",type:"email",value:n.email,onChange:g,required:!0}),m.email&&e.jsx("p",{className:"text-red-600 text-sm",children:m.email})]})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(o,{htmlFor:"role_id",className:"text-left",children:"Role*"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(W,{onValueChange:s=>u(r=>({...r,role_id:s})),value:n.role_id,children:[e.jsx(X,{className:"w-full",children:e.jsx(Y,{placeholder:"Select a Role",children:((C=N.find(s=>String(s.id)===n.role_id))==null?void 0:C.name)||"Select a Role"})}),e.jsx(Z,{children:N.map(s=>e.jsx(_,{value:String(s.id),children:s.name},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(o,{htmlFor:"mobile",className:"text-left",children:"Mobile"}),e.jsx("div",{className:"col-span-2",children:e.jsx(d,{id:"mobile",name:"mobile",value:n.mobile,onChange:g})})]})]})]}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Account Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage account access, reset passwords, or delete the account."}),e.jsx(v,{className:"mb-10"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-base font-medium",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reset the user's password using one of the options below."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{variant:"outline",onClick:V,children:"Email Password Reset"}),e.jsxs(D,{children:[e.jsx(F,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Manual Password Reset"})}),e.jsxs(E,{children:[e.jsxs(R,{children:[e.jsx(k,{children:"Manual Password Reset"}),e.jsx(B,{children:"Enter the new password below to manually reset the user's password."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"newPassword",children:"New Password"}),e.jsx(d,{id:"newPassword",name:"newPassword",type:"password",value:l.newPassword,onChange:s=>p(r=>({...r,newPassword:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(d,{id:"confirmPassword",name:"confirmPassword",type:"password",value:l.confirmPassword,onChange:s=>p(r=>({...r,confirmPassword:s.target.value}))})]})]}),e.jsxs(T,{children:[e.jsx(I,{children:"Cancel"}),e.jsx(L,{onClick:H,children:"Save"})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-base font-medium",children:"Disable Account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Disable this account from being accessed."})]}),e.jsx(ee,{checked:!n.active,onCheckedChange:s=>M(!s)})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-base font-medium",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently remove this account from the system. This action cannot be undone."})]}),e.jsx("div",{children:e.jsxs(D,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(c,{variant:"destructive",children:[e.jsx(ae,{className:"h-5 w-5 mr-2"}),"Delete Account"]})}),e.jsxs(E,{children:[e.jsxs(R,{children:[e.jsx(k,{children:"Confirm Deletion"}),e.jsx(B,{children:"Are you sure you want to delete this account? This action cannot be undone."})]}),e.jsxs(T,{children:[e.jsx(I,{children:"Cancel"}),e.jsx(L,{onClick:q,children:"Confirm"})]})]})]})})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-4 mt-6"})]})]})]})}export{Fe as default};
