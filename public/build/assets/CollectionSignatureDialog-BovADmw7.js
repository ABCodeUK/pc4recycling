import{r as t,j as e}from"./app-Cma8V3l9.js";import{S as f,C as p}from"./checkbox-g5XuN9uX.js";import{D as E,b as A,c as L,d as F,e as B}from"./dialog-C3tgJ_8I.js";import{T as U,a as q,b as g,c as j}from"./tabs-sJVBdolV.js";import{B as l}from"./button-DS1ZOJ9c.js";import{L as o}from"./label-IUEK5zVZ.js";import{I as C}from"./input-_RUYSLpp.js";import"./extends-CF3RwP-h.js";import"./index-rOaI9F-v.js";import"./index-jFmiJHnk.js";import"./index-CrYhDhYK.js";import"./index-BUxlmQ7d.js";import"./createLucideIcon-BnM-jrHn.js";import"./index-Dp-u-l4U.js";import"./index-DHxxav9I.js";import"./index-CoYLIXTa.js";import"./utils-CytzSlOG.js";import"./index-BH7C-wFc.js";import"./index-Cdv8n69u.js";import"./index-BwobEAja.js";function ie({isOpen:N,onClose:b,onComplete:y}){const[S,u]=t.useState("customer"),[c,D]=t.useState(null),[m,k]=t.useState(""),[d,P]=t.useState(""),[h,T]=t.useState(!1),[x,w]=t.useState(!1),i=t.useRef(null),n=t.useRef(null),R=()=>{var s,a;if(!h){alert("Please confirm the items list");return}if((s=i.current)!=null&&s.isEmpty()){alert("Please provide a signature");return}if(!m.trim()){alert("Please provide your name");return}const r=(a=i.current)==null?void 0:a.getCanvas();r&&(D(r.toDataURL()),u("driver"))},I=()=>{var s,a;if(!x){alert("Please confirm collection of all items");return}if((s=n.current)!=null&&s.isEmpty()){alert("Please provide a signature");return}if(!d.trim()){alert("Please provide your name");return}if(!c){alert("Customer signature is required");return}const r=(a=n.current)==null?void 0:a.getCanvas();r&&y(c,m,r.toDataURL(),d)},v=r=>{var s;(s=r.current)==null||s.clear()};return e.jsx(E,{open:N,onOpenChange:b,children:e.jsxs(A,{className:"max-w-3xl",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Collection Signatures"}),e.jsx(B,{children:"Please collect signatures from both the customer and driver to mark this job as collected."})]}),e.jsxs(U,{value:S,onValueChange:u,children:[e.jsxs(q,{className:"grid w-full grid-cols-2",children:[e.jsx(g,{value:"customer",children:"Customer"}),e.jsx(g,{value:"driver",disabled:!c,children:"Driver"})]}),e.jsx(j,{value:"customer",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-lg p-4",children:e.jsx(f,{ref:i,canvasProps:{className:"signature-canvas w-full h-[200px] border rounded-lg bg-white",style:{touchAction:"none"}}})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(o,{htmlFor:"customerName",children:"Name"}),e.jsx(C,{id:"customerName",value:m,onChange:r=>k(r.target.value),placeholder:"Enter your name"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"items-confirmed",checked:h,onCheckedChange:r=>T(r)}),e.jsx(o,{htmlFor:"items-confirmed",className:"text-sm",children:"I confirm that the items PC4Recycling are collecting are marked on the list."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(l,{variant:"outline",onClick:()=>v(i),children:"Clear"}),e.jsx(l,{onClick:R,children:"I Agree"})]})]})}),e.jsx(j,{value:"driver",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-lg p-4",children:e.jsx(f,{ref:n,canvasProps:{className:"signature-canvas w-full h-[200px] border rounded-lg bg-white",style:{touchAction:"none"}}})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(o,{htmlFor:"driverName",children:"Name"}),e.jsx(C,{id:"driverName",value:d,onChange:r=>P(r.target.value),placeholder:"Enter your name"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"driver-confirmed",checked:x,onCheckedChange:r=>w(r)}),e.jsx(o,{htmlFor:"driver-confirmed",className:"text-sm",children:"I confirm that I have collected all items listed."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(l,{variant:"outline",onClick:()=>v(n),children:"Clear"}),e.jsx(l,{onClick:I,children:"Mark Job Collected"})]})]})})]})]})})}export{ie as default};
