import{r as l,j as e,b as j}from"./app-BB65Mc1n.js";import{D as f,b as h,c as x,d as q}from"./dialog-44kL--cs.js";import{B as c}from"./button-AMd0rht4.js";import{I as u}from"./input-BdsrUm4j.js";import{L as n}from"./label-B29Fbpt8.js";import{T as _}from"./textarea-DrPmTigR.js";import{t as a}from"./index-BD8g9cTJ.js";import"./index-DJRbUwlk.js";import"./index-CwOflKzf.js";import"./index-Bax49BpN.js";import"./index-C6WAMNeG.js";import"./index-BD0Aflgb.js";import"./index-DwCxHBl2.js";import"./utils-CytzSlOG.js";import"./createLucideIcon-DhOTYlCm.js";import"./index-BwobEAja.js";function A({isOpen:d,onClose:s,jobId:m,initialData:r}){const[t,i]=l.useState({job_quote:"",collection_date:"",quote_information:""});l.useEffect(()=>{var o;r&&i({job_quote:r.job_quote||"",collection_date:((o=r.collection_date)==null?void 0:o.split("T")[0])||"",quote_information:r.quote_information||""})},[r]);const p=async()=>{try{if(!t.job_quote){a.error("Quote amount is required");return}if(!t.collection_date){a.error("Collection date is required");return}const o={...t,quote_information:t.quote_information||""},v=await j.post(`/api/jobs/${m}/provide-quote`,o);a.success("Quote provided successfully"),s(),window.location.reload()}catch(o){console.error("Error providing quote:",o),a.error("Failed to provide quote")}};return e.jsx(f,{open:d,onOpenChange:s,children:e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(q,{children:"Provide Quote"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"job_quote",children:"Quote Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5",children:"Â£"}),e.jsx(u,{id:"job_quote",className:"pl-7",value:t.job_quote,onChange:o=>i({...t,job_quote:o.target.value}),placeholder:"Enter quote amount"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"collection_date",children:"Suggested Collection Date"}),e.jsx(u,{id:"collection_date",type:"date",value:t.collection_date,onChange:o=>i({...t,collection_date:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"quote_information",children:"Quote Information"}),e.jsx(_,{id:"quote_information",value:t.quote_information,onChange:o=>i({...t,quote_information:o.target.value}),placeholder:"Enter quote details"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(c,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(c,{onClick:p,children:"Submit Quote"})]})]})})}export{A as default};
