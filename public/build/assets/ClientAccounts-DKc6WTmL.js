import{r as n,j as e,b as I}from"./app-Bu3c7SRr.js";import{S as L,A as T,a as k,b as O,B as P,c as $,d as w,e as N,f as q}from"./breadcrumb-Bi7r5ojT.js";import{S as v}from"./separator-DeG03c2e.js";import{B as l}from"./button-Bugdv60n.js";import{I as c}from"./input-BVpfwKRE.js";import{L as j}from"./label-e3wTgNA8.js";import{DataTable as z}from"./data-table-DO44T3AD.js";import{columns as H}from"./columns-BKp_cXuD.js";import{D as M,a as R,b as U,c as W,d as G,e as J,f as K}from"./dialog-ggMMgphc.js";import{t as f}from"./index-3t_yQiYB.js";import{E as Q}from"./eye-C-oKGawm.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-ChGmrCfR.js";import"./createLucideIcon-Bz1iimCp.js";import"./index-SS-33b3l.js";import"./index-DFqYG-k0.js";import"./index-BUVUn23p.js";import"./index-_W5zKMP9.js";import"./index-C7O5j1LF.js";import"./index-DwKaao6N.js";import"./index-s5S9bHjZ.js";import"./index-CAO6zNd6.js";import"./calendar-BRWOvoKA.js";import"./table-CKhMPQAp.js";import"./select-DIgAzQ0l.js";import"./arrow-up-down-BdhXPZMB.js";function Ae({clients:S,currentUserId:V}){const[D,X]=n.useState(S),[o,g]=n.useState({name:"",email:"",contact_name:""}),[i,m]=n.useState({name:"",email:"",contact_name:""}),[d,A]=n.useState(""),[Y,b]=n.useState(!1),[_,h]=n.useState(!1),C=()=>m({name:"",email:"",contact_name:""}),x=()=>{g({name:"",email:"",contact_name:""}),C()},p=s=>{const{name:t,value:a}=s.target;g(r=>({...r,[t]:a})),m(r=>({...r,[t]:""}))},y=s=>{A(s.target.value)},F=async()=>{var s,t;C();try{b(!0);const a=Math.random().toString(36).slice(-8),r={name:o.name,email:o.email,contact_name:o.contact_name,password:a,password_confirmation:a},u=await I.post("/customers/store",r);u.data&&(f.success("Client successfully added!"),h(!1),x(),u.data.id&&(window.location.href=`/customers/${u.data.id}/edit`))}catch(a){(t=(s=a.response)==null?void 0:s.data)!=null&&t.errors?(m(a.response.data.errors),Object.values(a.response.data.errors).forEach(r=>{f.error(r[0])})):f.error("Failed to add client.")}finally{b(!1)}},B=D.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())||s.email.toLowerCase().includes(d.toLowerCase())),E=[...H,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const t=s.original;return e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/customers/${t.id}`,children:e.jsx(Q,{className:"h-4 w-4"})})})}}];return e.jsxs(L,{children:[e.jsx(T,{}),e.jsxs(k,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(O,{className:"-ml-1"}),e.jsx(v,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(P,{children:e.jsxs($,{children:[e.jsx(w,{children:e.jsx(N,{href:"/",children:"Dashboard"})}),e.jsx(q,{}),e.jsx(w,{children:e.jsx(N,{href:"/customers",children:"Customers"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Customers"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Customers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Below is a list of all customers on the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{placeholder:"Search Customers...",value:d,onChange:y,className:"max-w-sm"}),e.jsxs(M,{open:_,onOpenChange:s=>{s||x(),h(s)},children:[e.jsx(R,{asChild:!0,children:e.jsx(l,{children:"Add New Customer"})}),e.jsxs(U,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(W,{children:[e.jsx(G,{children:"Add new customer"}),e.jsx(J,{children:"Fill in the details for the new client below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",children:"Company Name"}),e.jsx(c,{id:"name",name:"name",value:o.name,onChange:p}),i.name&&e.jsx("p",{className:"text-red-600 text-sm",children:i.name})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"contact_name",children:"Contact Name"}),e.jsx(c,{id:"contact_name",name:"contact_name",value:o.contact_name,onChange:p,required:!0}),i.contact_name&&e.jsx("p",{className:"text-red-600 text-sm",children:i.contact_name})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",name:"email",value:o.email,onChange:p}),i.email&&e.jsx("p",{className:"text-red-600 text-sm",children:i.email})]})]})}),e.jsxs(K,{children:[e.jsx(l,{variant:"outline",onClick:()=>{x(),h(!1)},children:"Cancel"}),e.jsx(l,{onClick:F,children:"Create Client"})]})]})]})]})]}),e.jsx(v,{className:"my-4"}),e.jsx(z,{columns:E,data:B})]})]})]})]})}export{Ae as default};
