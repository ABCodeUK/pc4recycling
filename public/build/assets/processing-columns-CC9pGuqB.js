import{j as s,b as E}from"./app-CNWjOMNx.js";import{S as x,a as j,b as m,c as f,d}from"./select-DyBRev3z.js";import{I as u}from"./input-CKARXW-H.js";import{B as b}from"./button-Cif8vmUM.js";import{t as v}from"./index-DROTMuiR.js";import{T as y}from"./trash-2-UOQr6mTH.js";import{M as S}from"./maximize-2-U-dT6VrO.js";import"./index-DUDCROMg.js";import"./index-D-4-NTWd.js";import"./index-CmDO7QdU.js";import"./index-DPKFiV9N.js";import"./index-BHpFse_T.js";import"./index-CNsmnkFI.js";import"./createLucideIcon-ClQ1hqbp.js";import"./index-BqYSSVB3.js";import"./index-CnljWFNF.js";import"./index-BflIAMo0.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const Q=[{id:"actions",header:({table:i})=>{const n=i.options.meta;return n!=null&&n.isEditable?"Actions":null},minSize:100,cell:({row:i,table:n})=>{const e=n.options.meta;return!((e==null?void 0:e.isEditable)??!1)||i.original.added==="Collection"?null:s.jsx("div",{className:"flex gap-2",children:s.jsx(b,{variant:"destructive",size:"sm",onClick:async()=>{var t,r;if(i.original.id>0)try{await E.delete(`/api/jobs/${i.original.job_id}/items/${i.original.id}`);const a=[...n.options.data],o=a.indexOf(i.original);a.splice(o,1),(t=e==null?void 0:e.setItems)==null||t.call(e,[...a]),v.success("Item deleted successfully")}catch(a){console.error("Error deleting item:",a),v.error("Failed to delete item")}else{const a=[...n.options.data],o=a.indexOf(i.original);a.splice(o,1),(r=e==null?void 0:e.setItems)==null||r.call(e,[...a])}},children:s.jsx(y,{className:"h-4 w-4"})})})}},{accessorKey:"item_number",header:"Item #",cell:({row:i})=>i.original.item_number,minSize:120},{accessorKey:"quantity",header:"Qty",minSize:150,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u,{type:"number",min:"1",value:i.original.quantity,onChange:l=>{var r;const t=parseInt(l.target.value)||1;i.original.quantity=t,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},className:"w-20"}),i.original.quantity>1&&s.jsx(b,{variant:"outline",size:"sm",onClick:()=>{var l;return(l=e==null?void 0:e.onExpandItem)==null?void 0:l.call(e,i.original)},title:"Expand quantity into individual items",children:s.jsx(S,{className:"h-4 w-4"})})]}):s.jsx("span",{children:i.original.quantity})}},{accessorKey:"category_id",header:"Category",cell:({row:i,table:n})=>{var t;const e=n.options.meta,c=(e==null?void 0:e.categories)??[];if(!((e==null?void 0:e.isEditable)??!1)){const r=c.find(a=>a.id===i.original.category_id);return s.jsx("span",{children:(r==null?void 0:r.name)||"-"})}return s.jsxs(x,{value:((t=i.original.category_id)==null?void 0:t.toString())||"",onValueChange:r=>{var g;const a=parseInt(r);i.original.category_id=a,i.original.sub_category_id=null,i.original.processing_specification={};const o=c.find(p=>p.id===a);o?i.original.processing_weight=o.default_weight||null:i.original.processing_weight=null,(g=e==null?void 0:e.setItems)==null||g.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(m,{placeholder:"Select category"})}),s.jsx(f,{children:c.map(r=>s.jsx(d,{value:r.id.toString(),children:r.name},r.id))})]})}},{accessorKey:"sub_category_id",header:"Sub Category",minSize:180,cell:({row:i,table:n})=>{var a;const e=n.options.meta,c=(e==null?void 0:e.categories)??[],l=(e==null?void 0:e.isEditable)??!1,t=c.find(o=>o.id===i.original.category_id),r=(t==null?void 0:t.sub_categories)??[];if(r.length===0)return null;if(!l){const o=r.find(g=>g.id===i.original.sub_category_id);return s.jsx("span",{children:(o==null?void 0:o.name)||"-"})}return s.jsxs(x,{value:((a=i.original.sub_category_id)==null?void 0:a.toString())||"",onValueChange:o=>{var _;const g=parseInt(o);i.original.sub_category_id=g;const p=r.find(h=>h.id===g);p!=null&&p.default_weight&&(i.original.processing_weight=p.default_weight),(_=e==null?void 0:e.setItems)==null||_.call(e,[...n.options.data])},disabled:!i.original.category_id,children:[s.jsx(j,{children:s.jsx(m,{placeholder:"Select sub-category"})}),s.jsx(f,{children:r.map(o=>s.jsx(d,{value:o.id.toString(),children:o.name},o.id))})]})}},{accessorKey:"processing_make",header:"Make",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.processing_make||"",onChange:l=>{var r;const t=n.options.data.map(a=>({...a,processing_make:a===i.original?l.target.value:a.processing_make}));(r=e==null?void 0:e.setItems)==null||r.call(e,t)},placeholder:"Enter make"}):s.jsx("span",{children:i.original.processing_make||"-"})}},{accessorKey:"processing_model",header:"Model",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.processing_model||"",onChange:l=>{var t;i.original.processing_model=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:i.original.processing_model||"-"})}},{accessorKey:"processing_serial_number",header:"Serial Number",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.processing_serial_number||"",onChange:l=>{var t;i.original.processing_serial_number=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter serial number"}):s.jsx("span",{children:i.original.processing_serial_number||"-"})}},{accessorKey:"processing_asset_tag",header:"Asset Tag",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.processing_asset_tag||"",onChange:l=>{var t;i.original.processing_asset_tag=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter asset tag"}):s.jsx("span",{children:i.original.processing_asset_tag||"-"})}},{accessorKey:"processing_weight",header:"Weight (kg)",minSize:150,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.processing_weight||"",onChange:l=>{var t;i.original.processing_weight=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter weight"}):s.jsx("span",{children:i.original.processing_weight||"-"})}},{accessorKey:"processing_erasure_required",header:"Erasure Required",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs(x,{value:i.original.processing_erasure_required||"",onValueChange:l=>{var t;i.original.processing_erasure_required=l,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(m,{placeholder:"Select option"})}),s.jsxs(f,{children:[s.jsx(d,{value:"Yes",children:"Yes"}),s.jsx(d,{value:"No",children:"No"}),s.jsx(d,{value:"N/A",children:"N/A"}),s.jsx(d,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:i.original.processing_erasure_required||"-"})}},{accessorKey:"processing_data_status",header:({table:i})=>{const n=i.options.meta;return["Processing","Completed"].includes((n==null?void 0:n.jobStatus)||"")?"Data Status":null},minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,l=e==null?void 0:e.jobStatus;return["Processing","Completed"].includes(l||"")?c?s.jsxs(x,{value:i.original.processing_data_status||"",onValueChange:t=>{var r;i.original.processing_data_status=t,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(m,{placeholder:"Select status"})}),s.jsxs(f,{children:[s.jsx(d,{value:"Destroyed (Physical Destruction)",children:"Destroyed (Physical Destruction)"}),s.jsx(d,{value:"Wiped Aiken",children:"Wiped Aiken"}),s.jsx(d,{value:"Wiped Ziperase",children:"Wiped Ziperase"}),s.jsx(d,{value:"No Erasure Required",children:"No Erasure Required"}),s.jsx(d,{value:"Drive Removed by Client",children:"Drive Removed by Client"})]})]}):s.jsx("span",{children:i.original.processing_data_status||"-"}):null}},{accessorKey:"item_status",header:({table:i})=>{const n=i.options.meta;return["Processing","Completed"].includes((n==null?void 0:n.jobStatus)||"")?"Item Status":null},minSize:200,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,l=e==null?void 0:e.jobStatus;return["Processing","Completed"].includes(l||"")?c?s.jsxs(x,{value:i.original.item_status||"",onValueChange:t=>{var r;i.original.item_status=t,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(m,{placeholder:"Select status"})}),s.jsxs(f,{children:[s.jsx(d,{value:"Reusing",children:"Reusing"}),s.jsx(d,{value:"Repurposing Parts",children:"Repurposing Parts"}),s.jsx(d,{value:"Recycling",children:"Recycling"}),s.jsx(d,{value:"N/A",children:"N/A"})]})]}):s.jsx("span",{children:i.original.item_status||"-"}):null}},{accessorKey:"processing_specification",header:"Specifications",minSize:800,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,t=((e==null?void 0:e.categories)??[]).find(a=>a.id===i.original.category_id),r=(t==null?void 0:t.spec_fields)??[];if(typeof i.original.processing_specification=="string")try{i.original.processing_specification=JSON.parse(i.original.processing_specification)}catch{i.original.processing_specification={}}return c?!t||r.length===0?s.jsx("span",{className:"text-muted-foreground"}):s.jsx("div",{className:"flex flex-row gap-2",children:r.map(a=>{var o;return s.jsxs("div",{className:"relative w-[250px]",children:[s.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground whitespace-nowrap pointer-events-none",children:[a.spec_name,":"]}),s.jsx(u,{value:((o=i.original.processing_specification)==null?void 0:o[a.spec_name])||"",onChange:g=>{var _;const p=n.options.data.map(h=>h===i.original?{...h,processing_specification:{...h.processing_specification,[a.spec_name]:g.target.value}}:h);(_=e==null?void 0:e.setItems)==null||_.call(e,p)},className:"h-9 w-full pl-[calc(1.5rem+var(--label-width))]",style:{"--label-width":`${a.spec_name.length*8}px`}})]},a.id)})}):i.original.processing_specification?s.jsx("div",{className:"space-y-1",children:r.map(a=>{var o;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium",children:[a.spec_name,":"]})," ",((o=i.original.processing_specification)==null?void 0:o[a.spec_name])||"-"]},a.id)})}):"-"}}];export{Q as processingColumns};
