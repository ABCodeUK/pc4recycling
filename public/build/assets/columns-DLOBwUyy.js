import{j as s,b as _}from"./app-DUv4C8zR.js";import{S as h,a as x,b as m,c as j,d as u}from"./select-Cce2oJH8.js";import{I as p}from"./input-ER8UZmlu.js";import{B as E}from"./button-ByXYoKeZ.js";import{t as f}from"./index-DfymCQFU.js";import{M as y}from"./maximize-2-D5P1B557.js";import{T as v}from"./trash-2-DBI7At-f.js";import"./index-DeR6T8Ux.js";import"./index-Bi2U6H-I.js";import"./index-CAh_ZuFR.js";import"./index-XC-7eegb.js";import"./index-Lcj1GtjH.js";import"./index-Ct7uzItS.js";import"./createLucideIcon-D1MVXgdA.js";import"./index-D1LanMWQ.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const F=[{accessorKey:"item_number",header:"Item #",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(p,{value:e.original.item_number,readOnly:!0,className:"w-24"}):e.original.item_number}},{accessorKey:"quantity",header:"Qty",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{type:"number",min:1,value:e.original.quantity,onChange:o=>{var r;e.original.quantity=parseInt(o.target.value),(r=i==null?void 0:i.setItems)==null||r.call(i,[...n.options.data])},className:"w-20"}),s.jsx(E,{variant:"outline",size:"sm",onClick:()=>{var o;return(o=i==null?void 0:i.onExpandItem)==null?void 0:o.call(i,e.original)},className:"ml-2",children:s.jsx(y,{className:"h-4 w-4"})})]}):e.original.quantity}},{accessorKey:"category_id",header:"Category",cell:({row:e,table:n})=>{var a;const i=n.options.meta,l=(i==null?void 0:i.isEditable)??!1,o=(i==null?void 0:i.categories)??[],r=o.find(t=>t.id===e.original.category_id);return l?s.jsxs(h,{value:(a=e.original.category_id)==null?void 0:a.toString(),onValueChange:t=>{var g;const d=parseInt(t);e.original.category_id=d,e.original.sub_category_id=null,(g=i==null?void 0:i.setItems)==null||g.call(i,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(m,{placeholder:"Select category"})}),s.jsx(j,{children:o.map(t=>s.jsx(u,{value:t.id.toString(),children:t.name},t.id))})]}):s.jsx("span",{children:(r==null?void 0:r.name)||"-"})}},{accessorKey:"sub_category_id",header:"Sub Category",cell:({row:e,table:n})=>{var t,d,g;const i=n.options.meta,l=(i==null?void 0:i.isEditable)??!1,r=((i==null?void 0:i.categories)??[]).find(c=>c.id===e.original.category_id),a=(t=r==null?void 0:r.sub_categories)==null?void 0:t.find(c=>c.id===e.original.sub_category_id);return(d=r==null?void 0:r.sub_categories)!=null&&d.length?l?s.jsxs(h,{value:(g=e.original.sub_category_id)==null?void 0:g.toString(),onValueChange:c=>{var b;e.original.sub_category_id=parseInt(c),(b=i==null?void 0:i.setItems)==null||b.call(i,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(m,{placeholder:"Select sub-category"})}),s.jsx(j,{children:r.sub_categories.map(c=>s.jsx(u,{value:c.id.toString(),children:c.name},c.id))})]}):s.jsx("span",{children:(a==null?void 0:a.name)||"-"}):null}},{accessorKey:"make",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(p,{value:e.original.make||"",onChange:o=>{var r;e.original.make=o.target.value,(r=i==null?void 0:i.setItems)==null||r.call(i,[...n.options.data])},placeholder:"Enter make"}):s.jsx("span",{children:e.original.make||"-"})}},{accessorKey:"model",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsx(p,{value:e.original.model||"",onChange:o=>{var r;e.original.model=o.target.value,(r=i==null?void 0:i.setItems)==null||r.call(i,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:e.original.model||"-"})}},{accessorKey:"erasure_required",cell:({row:e,table:n})=>{const i=n.options.meta;return(i==null?void 0:i.isEditable)??!1?s.jsxs(h,{value:e.original.erasure_required||"",onValueChange:o=>{var r;e.original.erasure_required=o,(r=i==null?void 0:i.setItems)==null||r.call(i,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(m,{placeholder:"Select option"})}),s.jsxs(j,{children:[s.jsx(u,{value:"Yes",children:"Yes"}),s.jsx(u,{value:"No",children:"No"}),s.jsx(u,{value:"N/A",children:"N/A"}),s.jsx(u,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:e.original.erasure_required||"-"})}},{id:"actions",header:({table:e})=>{const n=e.options.meta;return n!=null&&n.isEditable?"Actions":null},cell:({row:e,table:n})=>{const i=n.options.meta;if(!((i==null?void 0:i.isEditable)??!1))return null;const o=e.original.id>0;return s.jsx(E,{variant:"destructive",size:"sm",onClick:async()=>{var r,a;if(o)try{await _.delete(`/api/jobs/${e.original.job_id}/items/${e.original.id}`);const t=[...n.options.data],d=t.indexOf(e.original);t.splice(d,1),(r=i==null?void 0:i.setItems)==null||r.call(i,[...t]),f.success("Item deleted successfully")}catch(t){console.error("Error deleting item:",t),f.error("Failed to delete item")}else{const t=[...n.options.data],d=t.indexOf(e.original);t.splice(d,1),(a=i==null?void 0:i.setItems)==null||a.call(i,[...t])}},children:s.jsx(v,{className:"h-4 w-4"})})}}];export{F as jobItemColumns};
