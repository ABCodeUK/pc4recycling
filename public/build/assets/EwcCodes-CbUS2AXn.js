import{r as t,j as e,b as v}from"./app-CxxjQbGd.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as u,e as j,f as N}from"./breadcrumb-CVfpatPu.js";import{S as F}from"./separator-OWjsBv_k.js";import{B as c}from"./button-BfCUFj2v.js";import{I as S}from"./input-DPP4pqCX.js";import{L as g}from"./label-2wttpgDy.js";import{DataTable as se}from"./data-table-nLBKaBBm.js";import{columns as re}from"./columns-DLrpDom1.js";import ae from"./VariablesNavigation-BdyRv2HG.js";import{D as k,a as te,b as T,c as I,d as B,e as L,f as P}from"./dialog-0RdKrRPh.js";import{A as ie,a as de,b as oe,c as ce,d as le,e as ne,f as he,g as me,h as xe}from"./alert-dialog-IHHWyKpT.js";import{t as i}from"./index-CGbDflUn.js";import{S as pe}from"./square-pen-DlkBvHz6.js";import{T as ue}from"./trash-2-BuUhqBcA.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-uXkLkjFM.js";import"./createLucideIcon-YMZQpf5O.js";import"./index-CpwjmW8Z.js";import"./Combination-DnQhWoyI.js";import"./index-Drt13xjj.js";import"./index-DdQz_MXT.js";import"./index-Dy7fGhxC.js";import"./index-BlL_lDRx.js";import"./index---YqbKSt.js";import"./table-B3GsT3Yk.js";import"./select-CnJHFvlZ.js";import"./arrow-up-down-BHNPgGYQ.js";function Ue({ewcCodes:O}){const[V,C]=t.useState(O),[f,y]=t.useState({ewc_code:"",ea_description:""}),[b,A]=t.useState({ewc_code:"",ea_description:""}),[d,n]=t.useState({ewc_code:"",ea_description:""}),[w,z]=t.useState(""),[je,h]=t.useState(!1),[_,W]=t.useState(null),[H,E]=t.useState(!1),[$,m]=t.useState(!1),x=()=>{n({ewc_code:"",ea_description:""})},D=()=>{y({ewc_code:"",ea_description:""}),x()},p=(s,r)=>{const{name:a,value:o}=s.target;r==="add"?y(l=>({...l,[a]:o})):A(l=>({...l,[a]:o})),n(l=>({...l,[a]:""}))},q=s=>{z(s.target.value)},M=async()=>{x();try{h(!0);const s=await v.post("/settings/variables/ewc-codes",f);if(s.status===200){const r=s.data;C(a=>[...a,r]),D(),E(!1),i.success("EWC Code successfully created!")}else i.error("Failed to create EWC Code. Please try again.")}catch(s){s.response&&s.response.data.errors?n(s.response.data.errors):i.error("Error creating EWC Code. Please check the logs.")}finally{h(!1)}},R=async()=>{if(_){x();try{h(!0);const s=await v.put(`/settings/variables/ewc-codes/${_}`,b);if(s.status===200){const r=s.data;C(a=>a.map(o=>o.id===_?r:o)),W(null),m(!1),i.success("EWC Code successfully updated!")}else i.error("Failed to update EWC Code. Please try again.")}catch(s){s.response&&s.response.data.errors?n(s.response.data.errors):i.error("Error updating EWC Code. Please check the logs.")}finally{h(!1)}}},U=async s=>{try{(await v.delete(`/settings/variables/ewc-codes/${s}`)).status===200?(C(a=>a.filter(o=>o.id!==s)),i.success("EWC Code successfully deleted!")):i.error("Failed to delete EWC Code. Please try again.")}catch{i.error("Error deleting EWC Code. Please check the logs.")}},G=V.filter(s=>s.ewc_code.toLowerCase().includes(w.toLowerCase())||s.ea_description.toLowerCase().includes(w.toLowerCase())),J=[...re,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const r=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{A({ewc_code:r.ewc_code,ea_description:r.ea_description}),x(),W(r.id),m(!0)},children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsxs(ie,{children:[e.jsx(de,{asChild:!0,children:e.jsx(c,{variant:"destructive",size:"sm",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsxs(oe,{children:[e.jsxs(ce,{children:[e.jsx(le,{children:"Confirm Deletion"}),e.jsxs(ne,{children:["Are you sure you want to delete EWC Code ",e.jsx("b",{children:r.ewc_code}),"?"]})]}),e.jsxs(he,{children:[e.jsx(me,{children:"Cancel"}),e.jsx(xe,{onClick:()=>U(r.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(F,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(u,{children:e.jsx(j,{href:"/",children:"Dashboard"})}),e.jsx(N,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(N,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings/variables",children:"Variables"})}),e.jsx(N,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings/variables/ewc-codes",children:"EWC Codes"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(ae,{currentTab:"ewc-codes"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage EWC Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete EWC codes used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{placeholder:"Search EWC Codes...",value:w,onChange:q,className:"max-w-sm"}),e.jsxs(k,{open:H,onOpenChange:s=>{s||D(),E(s)},children:[e.jsx(te,{asChild:!0,children:e.jsx(c,{children:"Add EWC Code"})}),e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Add EWC Code"}),e.jsx(L,{children:"Fill in the details for the new EWC Code below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ewc_code",children:"EWC Code"}),e.jsx(S,{id:"ewc_code",name:"ewc_code",value:f.ewc_code,onChange:s=>p(s,"add")}),d.ewc_code&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ewc_code})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ea_description",children:"EA Description"}),e.jsx("textarea",{id:"ea_description",name:"ea_description",value:f.ea_description,onChange:s=>p(s,"add"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),d.ea_description&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ea_description})]})]})}),e.jsxs(P,{children:[e.jsx(c,{variant:"outline",onClick:()=>{D(),E(!1)},children:"Cancel"}),e.jsx(c,{onClick:M,children:"Create EWC Code"})]})]})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(k,{open:$,onOpenChange:m,children:e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Edit EWC Code"}),e.jsx(L,{children:"Update the details for the EWC Code below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ewc_code_edit",children:"EWC Code"}),e.jsx(S,{id:"ewc_code_edit",name:"ewc_code",value:b.ewc_code,onChange:s=>p(s,"edit")}),d.ewc_code&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ewc_code})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ea_description_edit",children:"EA Description"}),e.jsx("textarea",{id:"ea_description_edit",name:"ea_description",value:b.ea_description,onChange:s=>p(s,"edit"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),d.ea_description&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ea_description})]})]})}),e.jsxs(P,{children:[e.jsx(c,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(c,{onClick:R,children:"Save Changes"})]})]})})]})]})]})}export{Ue as default};
