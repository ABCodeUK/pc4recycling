import{r as i,j as e,b as d}from"./app-Cma8V3l9.js";import{S as m}from"./separator-CEPuzrhi.js";import{DataTable as x}from"./data-table-xMh9cd6K.js";import{driverJobColumns as p}from"./Columns-BvZTJS_l.js";import{t as h}from"./index-C_iezvca.js";import{B as u}from"./button-DS1ZOJ9c.js";import{C as f,d as g,e as N}from"./card-BxvaWE5z.js";import{u as j,M as w,P as y}from"./use-media-query-Fv5QAvo6.js";import{C}from"./calendar-TwlUnTX4.js";import{E as v}from"./eye-CSCMS_xt.js";import"./index-Dp-u-l4U.js";import"./index-DHxxav9I.js";import"./utils-CytzSlOG.js";import"./table-vJebbvAp.js";import"./select-DcwlFvdE.js";import"./index-jFmiJHnk.js";import"./index-CJRq-bCV.js";import"./index-rOaI9F-v.js";import"./index-BUxlmQ7d.js";import"./createLucideIcon-BnM-jrHn.js";import"./index-Cdv8n69u.js";import"./index-CrYhDhYK.js";import"./user-DBoxPFyt.js";import"./index-BwobEAja.js";function O(){const[o,c]=i.useState([]),[a,b]=i.useState(""),l=j("(min-width: 768px)");i.useEffect(()=>{(async()=>{try{const t=await d.get("/api/driver-jobs");c(t.data)}catch{h.error("Failed to fetch jobs.")}})()},[]);const r=o.filter(s=>{var t;return s.job_id.toLowerCase().includes(a.toLowerCase())||s.address.toLowerCase().includes(a.toLowerCase())||((t=s.client)==null?void 0:t.name)&&s.client.name.toLowerCase().includes(a.toLowerCase())}),n=s=>{switch(s){case"Scheduled":return"bg-orange-100 text-orange-800 border-orange-200";case"Postponed":case"Cancelled":return"bg-red-100 text-red-800 border-red-200";case"Collected":case"Processing":case"Complete":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("section",{className:"bg-white border shadow rounded-lg",children:[e.jsx("header",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Your Assigned Collections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collections assigned to you over the next 30 days."})]})})}),e.jsx(m,{}),e.jsx("div",{className:"p-6",children:l?e.jsx(x,{columns:p,data:r}):e.jsx("div",{className:"grid gap-4",children:r.length>0?r.map(s=>{var t;return e.jsxs(f,{className:"overflow-hidden",children:[e.jsxs(g,{className:"p-0",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:e.jsx("a",{href:`/collections/${s.id}`,className:"hover:underline",children:s.job_id})}),e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${n(s.job_status)}`,children:s.job_status})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"font-medium mb-2",children:((t=s.client)==null?void 0:t.name)||"N/A"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(w,{className:"h-4 w-4 mt-0.5 text-gray-500"}),e.jsx("span",{className:"text-sm",children:`${s.address}, ${s.town_city}, ${s.postcode}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.collection_date?new Date(s.collection_date).toLocaleDateString():"Not Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.items_count," items"]})]})]})]}),e.jsx(N,{className:"flex justify-end p-4 pt-0",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/collections/${s.id}`,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"View Details"]})})]},s.id)}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No collections found"})})})]})}export{O as default};
