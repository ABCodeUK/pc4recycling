import{r as d,j as e,b as u}from"./app-DGedXpK6.js";import{t as o}from"./index-B34HRg7w.js";import{B as p}from"./button-DjXm1grC.js";import{I as j}from"./input-CkBA5yRJ.js";import{B as C}from"./badge-D5z1vypp.js";import"./index-B_qNjpXx.js";import"./index-Dx4p5O6H.js";import"./index-BOJ2gww-.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";function F(){const[m,i]=d.useState(""),[a,c]=d.useState(!1),[f,g]=d.useState(!0),[l,r]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const n=await u.get("/settings/connections/imei");n.data.connected?(c(!0),i(n.data.api_key||"")):(c(!1),i(""))}catch{c(!1),i("")}finally{g(!1)}})()},[]);const h=async()=>{var t,n;r(!0);try{const s=await u.post("/settings/connections/imei/connect",{api_key:m});s.status===200?(c(!0),o.success("Successfully connected to IMEI!")):(c(!1),o.error(s.data.message||"Failed to connect to IMEI."))}catch(s){c(!1),o.error(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"An error occurred while connecting.")}finally{r(!1)}},x=async()=>{var t,n;r(!0);try{const s=await u.post("/settings/connections/imei/test",{api_key:m});s.status===200?o.success("IMEI connection is working!"):o.error(s.data.message||"Failed to test IMEI connection.")}catch(s){o.error(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"An error occurred while testing the connection.")}finally{r(!1)}},y=async()=>{var t,n;r(!0);try{const s=await u.delete("/settings/connections/imei");s.status===200?(c(!1),i(""),o.success("Successfully disconnected from IMEI.")):o.error(s.data.message||"Failed to disconnect.")}catch(s){o.error(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"An error occurred while disconnecting.")}finally{r(!1)}},I=f?"default":a?"success":"destructive";return e.jsxs("div",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"IMEI API"}),e.jsx(C,{variant:I,children:f?"Loading...":a?"Connected":"Not Connected"})]}),!f&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a?"Your IMEI API connection is active.":"Enter your IMEI API Key to connect and test the connection."}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{type:"text",placeholder:"Enter API Key",value:m,onChange:t=>i(t.target.value),disabled:l||a}),e.jsxs("div",{className:"flex gap-4",children:[!a&&e.jsx(p,{onClick:h,disabled:l||!m,children:l?"Processing...":"Connect"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"outline",onClick:x,disabled:l,children:"Test Connection"}),e.jsx(p,{variant:"destructive",onClick:y,disabled:l,children:"Disconnect"})]})]})]})]})]})}export{F as default};
