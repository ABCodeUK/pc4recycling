import{j as s,b as f}from"./app-BB65Mc1n.js";import{S as h,a as x,b,c as j,d as u}from"./select-Dp5Udnaz.js";import{I as g}from"./input-BdsrUm4j.js";import{B as m}from"./button-AMd0rht4.js";import{t as _}from"./index-BD8g9cTJ.js";import{M as y}from"./maximize-2-IQ1HLsfM.js";import{T as v}from"./trash-2-CyBVRyGm.js";import"./index-BD0Aflgb.js";import"./index-DJRbUwlk.js";import"./index-d89-VRCp.js";import"./index-CwOflKzf.js";import"./index-C6WAMNeG.js";import"./index-C6DuYNlM.js";import"./createLucideIcon-DhOTYlCm.js";import"./index--1ygw0mz.js";import"./index-Bax49BpN.js";import"./index-DbDOfuCE.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const Q=[{accessorKey:"item_number",header:"Item #",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.item_number,readOnly:!0,className:"w-24"}):i.original.item_number}},{accessorKey:"quantity",header:"Qty",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs("div",{className:"flex items-center",children:[s.jsx(g,{type:"number",min:1,value:i.original.quantity,onChange:a=>{var r;i.original.quantity=parseInt(a.target.value),(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},className:"w-20"}),s.jsx(m,{variant:"outline",size:"sm",onClick:()=>{var a;return(a=e==null?void 0:e.onExpandItem)==null?void 0:a.call(e,i.original)},className:"ml-2",children:s.jsx(y,{className:"h-4 w-4"})})]}):i.original.quantity}},{accessorKey:"category_id",header:"Category",cell:({row:i,table:n})=>{var o;const e=n.options.meta,l=(e==null?void 0:e.isEditable)??!1,a=(e==null?void 0:e.categories)??[],r=a.find(t=>t.id===i.original.category_id);return l?s.jsxs(h,{value:(o=i.original.category_id)==null?void 0:o.toString(),onValueChange:t=>{var p;const d=parseInt(t);i.original.category_id=d,i.original.sub_category_id=null,(p=e==null?void 0:e.setItems)==null||p.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(b,{placeholder:"Select category"})}),s.jsx(j,{children:a.map(t=>s.jsx(u,{value:t.id.toString(),children:t.name},t.id))})]}):s.jsx("span",{children:(r==null?void 0:r.name)||"-"})}},{accessorKey:"sub_category_id",header:"Sub Category",cell:({row:i,table:n})=>{var t,d,p;const e=n.options.meta,l=(e==null?void 0:e.isEditable)??!1,r=((e==null?void 0:e.categories)??[]).find(c=>c.id===i.original.category_id),o=(t=r==null?void 0:r.sub_categories)==null?void 0:t.find(c=>c.id===i.original.sub_category_id);return(d=r==null?void 0:r.sub_categories)!=null&&d.length?l?s.jsxs(h,{value:(p=i.original.sub_category_id)==null?void 0:p.toString(),onValueChange:c=>{var E;i.original.sub_category_id=parseInt(c),(E=e==null?void 0:e.setItems)==null||E.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(b,{placeholder:"Select sub-category"})}),s.jsx(j,{children:r.sub_categories.map(c=>s.jsx(u,{value:c.id.toString(),children:c.name},c.id))})]}):s.jsx("span",{children:(o==null?void 0:o.name)||"-"}):null}},{accessorKey:"make",header:"Make",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.make||"",onChange:a=>{var r;i.original.make=a.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter make"}):s.jsx("span",{children:i.original.make||"-"})}},{accessorKey:"model",header:"Model",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.model||"",onChange:a=>{var r;i.original.model=a.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:i.original.model||"-"})}},{accessorKey:"serial_number",header:"Serial Number",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.serial_number||"",onChange:a=>{var r;i.original.serial_number=a.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter serial number"}):s.jsx("span",{children:i.original.serial_number||"-"})}},{accessorKey:"asset_tag",header:"Asset Tag",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.asset_tag||"",onChange:a=>{var r;i.original.asset_tag=a.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter asset tag"}):s.jsx("span",{children:i.original.asset_tag||"-"})}},{accessorKey:"weight",header:"Weight (kg)",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.weight||"",onChange:a=>{var r;i.original.weight=a.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter weight"}):s.jsx("span",{children:i.original.weight||"-"})}},{accessorKey:"erasure_required",header:"Erasure Required",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs(h,{value:i.original.erasure_required||"",onValueChange:a=>{var r;i.original.erasure_required=a,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(b,{placeholder:"Select option"})}),s.jsxs(j,{children:[s.jsx(u,{value:"Yes",children:"Yes"}),s.jsx(u,{value:"No",children:"No"}),s.jsx(u,{value:"N/A",children:"N/A"}),s.jsx(u,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:i.original.erasure_required||"-"})}},{id:"actions",header:({table:i})=>{const n=i.options.meta;return n!=null&&n.isEditable?"Actions":null},cell:({row:i,table:n})=>{const e=n.options.meta;if(!((e==null?void 0:e.isEditable)??!1))return null;const a=i.original.id>0;return s.jsx(m,{variant:"destructive",size:"sm",onClick:async()=>{var r,o;if(a)try{await f.delete(`/api/jobs/${i.original.job_id}/items/${i.original.id}`);const t=[...n.options.data],d=t.indexOf(i.original);t.splice(d,1),(r=e==null?void 0:e.setItems)==null||r.call(e,[...t]),_.success("Item deleted successfully")}catch(t){console.error("Error deleting item:",t),_.error("Failed to delete item")}else{const t=[...n.options.data],d=t.indexOf(i.original);t.splice(d,1),(o=e==null?void 0:e.setItems)==null||o.call(e,[...t])}},children:s.jsx(v,{className:"h-4 w-4"})})}}];export{Q as jobItemColumns};
