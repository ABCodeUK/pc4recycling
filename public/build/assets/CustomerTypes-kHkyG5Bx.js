import{r as a,j as e,b as C}from"./app-DGedXpK6.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as u,e as j,f as b}from"./breadcrumb-DVHq5Awm.js";import{S as F}from"./separator-Qg1edzKM.js";import{B as n}from"./button-DjXm1grC.js";import{I as T}from"./input-CkBA5yRJ.js";import{L as k}from"./label-Ct80BZdK.js";import{DataTable as se}from"./data-table-2O2CANJJ.js";import{columns as te}from"./columns-WDS6pNCU.js";import re from"./VariablesNavigation-ByQFXGMN.js";import{D as E,a as ae,b as I,c as B,d as P,e as L,f as O}from"./dialog-CjHGOGdp.js";import{A as ie,a as le,b as ne,c as oe,d as ce,e as de,f as me,g as he,h as pe}from"./alert-dialog-FwAlGMcx.js";import{t as i}from"./index-B34HRg7w.js";import{S as xe}from"./square-pen-DAP9x76s.js";import{T as ue}from"./trash-2-CE_77rkt.js";import"./index-Dx4p5O6H.js";import"./index-BOJ2gww-.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-D1brpkaJ.js";import"./createLucideIcon-C-iaKTyE.js";import"./index-BNfd2_2U.js";import"./index-CLFtQT3G.js";import"./index-Crf3phMa.js";import"./index-B_qNjpXx.js";import"./index-CvV_Mgk0.js";import"./index-DYpMfZUf.js";import"./table-Cj_Afe3x.js";import"./select-DuTKz2sq.js";import"./arrow-up-down-DEJ3A0Ha.js";import"./tabs-BDf_6eYd.js";function Ge({customerTypes:V}){const[z,g]=a.useState(V),[D,N]=a.useState({ct_name:""}),[v,S]=a.useState({ct_name:""}),[c,d]=a.useState({ct_name:""}),[A,H]=a.useState(""),[je,m]=a.useState(!1),[f,w]=a.useState(null),[$,h]=a.useState(!1),[q,p]=a.useState(!1),x=()=>d({ct_name:""}),y=()=>{N({ct_name:""}),x()},_=(s,t)=>{const{name:r,value:l}=s.target;t==="add"?N(o=>({...o,[r]:l})):S(o=>({...o,[r]:l})),d(o=>({...o,[r]:""}))},M=s=>H(s.target.value),R=async()=>{x();try{m(!0);const s=await C.post("/settings/variables/customer-types",D);if(s.status===200){const t=s.data;g(r=>[...r,t]),y(),h(!1),i.success("Customer Type successfully created!")}else i.error("Failed to create Customer Type. Please try again.")}catch(s){s.response&&s.response.data.errors?d(s.response.data.errors):i.error("Error creating Customer Type. Please check the logs.")}finally{m(!1)}},U=async()=>{if(f){x();try{m(!0);const s=await C.put(`/settings/variables/customer-types/${f}`,v);if(s.status===200){const t=s.data;g(r=>r.map(l=>l.id===f?t:l)),w(null),p(!1),i.success("Customer Type successfully updated!")}else i.error("Failed to update Customer Type. Please try again.")}catch(s){s.response&&s.response.data.errors?d(s.response.data.errors):i.error("Error updating Customer Type. Please check the logs.")}finally{m(!1)}}},W=async s=>{try{(await C.delete(`/settings/variables/customer-types/${s}`)).status===200?(g(r=>r.filter(l=>l.id!==s)),i.success("Customer Type successfully deleted!")):i.error("Failed to delete Customer Type. Please try again.")}catch{i.error("Error deleting Customer Type. Please check the logs.")}},G=z.filter(s=>s.ct_name.toLowerCase().includes(A.toLowerCase())),J=[...te,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{S({ct_name:t.ct_name}),x(),w(t.id),p(!0)},children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsxs(ie,{children:[e.jsx(le,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Confirm Deletion"}),e.jsxs(de,{children:["Are you sure you want to delete Customer Type"," ",e.jsx("b",{children:t.ct_name}),"?"]})]}),e.jsxs(me,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(pe,{onClick:()=>W(t.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(F,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(u,{children:e.jsx(j,{href:"/",children:"Dashboard"})}),e.jsx(b,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(b,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings/variables",children:"Variables"})}),e.jsx(b,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings/variables/customer-types",children:"Customer Types"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(re,{currentTab:"customer-types"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage Customer Types"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete Customer Types used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{placeholder:"Search Customer Types...",value:A,onChange:M,className:"max-w-sm"}),e.jsxs(E,{open:$,onOpenChange:s=>{s||y(),h(s)},children:[e.jsx(ae,{asChild:!0,children:e.jsx(n,{onClick:()=>h(!0),children:"Add Customer Type"})}),e.jsxs(I,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(B,{children:[e.jsx(P,{children:"Add Customer Type"}),e.jsx(L,{children:"Fill in the details for the new Customer Type below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsxs(k,{htmlFor:"ct_name",children:["Customer Type Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"ct_name",name:"ct_name",value:D.ct_name,onChange:s=>_(s,"add")}),c.ct_name&&e.jsx("p",{className:"text-red-600 text-sm",children:c.ct_name})]})})}),e.jsxs(O,{children:[e.jsx(n,{variant:"outline",onClick:()=>{y(),h(!1)},children:"Cancel"}),e.jsx(n,{onClick:R,children:"Create Customer Type"})]})]})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(E,{open:q,onOpenChange:p,children:e.jsxs(I,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(B,{children:[e.jsx(P,{children:"Edit Customer Type"}),e.jsx(L,{children:"Update the details for the Customer Type below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsxs(k,{htmlFor:"ct_name_edit",children:["Customer Type Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"ct_name_edit",name:"ct_name",value:v.ct_name,onChange:s=>_(s,"edit")}),c.ct_name&&e.jsx("p",{className:"text-red-600 text-sm",children:c.ct_name})]})})]}),e.jsxs(O,{children:[e.jsx(n,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(n,{onClick:U,children:"Save Changes"})]})]})})]})]})]})}export{Ge as default};
