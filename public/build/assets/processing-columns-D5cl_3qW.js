import{j as s,b as E}from"./app-DUv4C8zR.js";import{S as h,a as x,b as _,c as j,d}from"./select-Cce2oJH8.js";import{I as g}from"./input-ER8UZmlu.js";import{B as f}from"./button-ByXYoKeZ.js";import{t as b}from"./index-DfymCQFU.js";import{T as y}from"./trash-2-DBI7At-f.js";import{M as S}from"./maximize-2-D5P1B557.js";import"./index-DeR6T8Ux.js";import"./index-Bi2U6H-I.js";import"./index-CAh_ZuFR.js";import"./index-XC-7eegb.js";import"./index-Lcj1GtjH.js";import"./index-Ct7uzItS.js";import"./createLucideIcon-D1MVXgdA.js";import"./index-D1LanMWQ.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const $=[{id:"actions",header:({table:i})=>{const n=i.options.meta;return n!=null&&n.isEditable?"Actions":null},minSize:100,cell:({row:i,table:n})=>{const e=n.options.meta;return!((e==null?void 0:e.isEditable)??!1)||i.original.added==="Collection"?null:s.jsx("div",{className:"flex gap-2",children:s.jsx(f,{variant:"destructive",size:"sm",onClick:async()=>{var r,t;if(i.original.id>0)try{await E.delete(`/api/jobs/${i.original.job_id}/items/${i.original.id}`);const a=[...n.options.data],l=a.indexOf(i.original);a.splice(l,1),(r=e==null?void 0:e.setItems)==null||r.call(e,[...a]),b.success("Item deleted successfully")}catch(a){console.error("Error deleting item:",a),b.error("Failed to delete item")}else{const a=[...n.options.data],l=a.indexOf(i.original);a.splice(l,1),(t=e==null?void 0:e.setItems)==null||t.call(e,[...a])}},children:s.jsx(y,{className:"h-4 w-4"})})})}},{accessorKey:"item_number",header:"Item #",cell:({row:i})=>i.original.item_number,minSize:120},{accessorKey:"quantity",header:"Qty",minSize:150,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{type:"number",min:"1",value:i.original.quantity,onChange:o=>{var t;const r=parseInt(o.target.value)||1;i.original.quantity=r,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},className:"w-20"}),i.original.quantity>1&&s.jsx(f,{variant:"outline",size:"sm",onClick:()=>{var o;return(o=e==null?void 0:e.onExpandItem)==null?void 0:o.call(e,i.original)},title:"Expand quantity into individual items",children:s.jsx(S,{className:"h-4 w-4"})})]}):s.jsx("span",{children:i.original.quantity})}},{accessorKey:"category_id",header:"Category",cell:({row:i,table:n})=>{var r;const e=n.options.meta,c=(e==null?void 0:e.categories)??[];if(!((e==null?void 0:e.isEditable)??!1)){const t=c.find(a=>a.id===i.original.category_id);return s.jsx("span",{children:(t==null?void 0:t.name)||"-"})}return s.jsxs(h,{value:((r=i.original.category_id)==null?void 0:r.toString())||"",onValueChange:t=>{var a;i.original.category_id=parseInt(t),i.original.sub_category_id=null,i.original.processing_specification={},(a=e==null?void 0:e.setItems)==null||a.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select category"})}),s.jsx(j,{children:c.map(t=>s.jsx(d,{value:t.id.toString(),children:t.name},t.id))})]})}},{accessorKey:"sub_category_id",header:"Sub Category",cell:({row:i,table:n})=>{var a;const e=n.options.meta,c=(e==null?void 0:e.categories)??[],o=(e==null?void 0:e.isEditable)??!1,r=c.find(l=>l.id===i.original.category_id),t=(r==null?void 0:r.sub_categories)??[];if(t.length===0)return null;if(!o){const l=t.find(p=>p.id===i.original.sub_category_id);return s.jsx("span",{children:(l==null?void 0:l.name)||"-"})}return s.jsxs(h,{value:((a=i.original.sub_category_id)==null?void 0:a.toString())||"",onValueChange:l=>{var p;i.original.sub_category_id=parseInt(l),(p=e==null?void 0:e.setItems)==null||p.call(e,[...n.options.data])},disabled:!i.original.category_id,children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select sub-category"})}),s.jsx(j,{children:t.map(l=>s.jsx(d,{value:l.id.toString(),children:l.name},l.id))})]})}},{accessorKey:"processing_make",header:"Make",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.processing_make||"",onChange:o=>{var t;const r=n.options.data.map(a=>({...a,processing_make:a===i.original?o.target.value:a.processing_make}));(t=e==null?void 0:e.setItems)==null||t.call(e,r)},placeholder:"Enter make"}):s.jsx("span",{children:i.original.processing_make||"-"})}},{accessorKey:"processing_model",header:"Model",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.processing_model||"",onChange:o=>{var r;i.original.processing_model=o.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:i.original.processing_model||"-"})}},{accessorKey:"serial_number",header:"Serial Number",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.serial_number||"",onChange:o=>{var r;i.original.serial_number=o.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter serial number"}):s.jsx("span",{children:i.original.serial_number||"-"})}},{accessorKey:"asset_tag",header:"Asset Tag",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.asset_tag||"",onChange:o=>{var r;i.original.asset_tag=o.target.value,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},placeholder:"Enter asset tag"}):s.jsx("span",{children:i.original.asset_tag||"-"})}},{accessorKey:"processing_erasure_required",header:"Erasure Required",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs(h,{value:i.original.processing_erasure_required||"",onValueChange:o=>{var r;i.original.processing_erasure_required=o,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select option"})}),s.jsxs(j,{children:[s.jsx(d,{value:"Yes",children:"Yes"}),s.jsx(d,{value:"No",children:"No"}),s.jsx(d,{value:"N/A",children:"N/A"}),s.jsx(d,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:i.original.processing_erasure_required||"-"})}},{accessorKey:"processing_data_status",header:({table:i})=>{const n=i.options.meta;return["Processing","Completed"].includes((n==null?void 0:n.jobStatus)||"")?"Data Status":null},minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,o=e==null?void 0:e.jobStatus;return["Processing","Completed"].includes(o||"")?c?s.jsxs(h,{value:i.original.processing_data_status||"",onValueChange:r=>{var t;i.original.processing_data_status=r,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select status"})}),s.jsxs(j,{children:[s.jsx(d,{value:"Destroyed (Physical Destruction)",children:"Destroyed (Physical Destruction)"}),s.jsx(d,{value:"Wiped Aiken",children:"Wiped Aiken"}),s.jsx(d,{value:"Wiped YouWipe",children:"Wiped YouWipe"}),s.jsx(d,{value:"No Erasure Required",children:"No Erasure Required"}),s.jsx(d,{value:"Drive Removed by Client",children:"Drive Removed by Client"})]})]}):s.jsx("span",{children:i.original.processing_data_status||"-"}):null}},{accessorKey:"processing_specification",header:"Specifications",minSize:800,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,r=((e==null?void 0:e.categories)??[]).find(a=>a.id===i.original.category_id),t=(r==null?void 0:r.spec_fields)??[];if(typeof i.original.processing_specification=="string")try{i.original.processing_specification=JSON.parse(i.original.processing_specification)}catch{i.original.processing_specification={}}return c?!r||t.length===0?s.jsx("span",{className:"text-muted-foreground"}):s.jsx("div",{className:"flex flex-row gap-2",children:t.map(a=>{var l;return s.jsxs("div",{className:"relative w-[250px]",children:[s.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground whitespace-nowrap pointer-events-none",children:[a.spec_name,":"]}),s.jsx(g,{value:((l=i.original.processing_specification)==null?void 0:l[a.spec_name])||"",onChange:p=>{var m;const v=n.options.data.map(u=>u===i.original?{...u,processing_specification:{...u.processing_specification,[a.spec_name]:p.target.value}}:u);(m=e==null?void 0:e.setItems)==null||m.call(e,v)},className:"h-9 w-full pl-[calc(1.5rem+var(--label-width))]",style:{"--label-width":`${a.spec_name.length*8}px`}})]},a.id)})}):i.original.processing_specification?s.jsx("div",{className:"space-y-1",children:t.map(a=>{var l;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium",children:[a.spec_name,":"]})," ",((l=i.original.processing_specification)==null?void 0:l[a.spec_name])||"-"]},a.id)})}):"-"}}];export{$ as processingColumns};
