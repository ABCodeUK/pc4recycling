import{r,j as e,b as d}from"./app-DUv4C8zR.js";import{S as m}from"./separator-52U-weNF.js";import{DataTable as x}from"./data-table-OL2a-HF-.js";import{clientJobColumns as p}from"./Columns-SsdY14vV.js";import{t as h}from"./index-DfymCQFU.js";import{B as u}from"./button-ByXYoKeZ.js";import{C as f,d as g,e as j}from"./card-GYJ5VV1v.js";import{u as N,M as b,P as w}from"./use-media-query-DJmO4a4z.js";import{C as y}from"./calendar-Blwv3BR4.js";import{E as C}from"./eye-ouWPq0zm.js";import"./index-XC-7eegb.js";import"./index-DeR6T8Ux.js";import"./utils-CytzSlOG.js";import"./table-BXRjnKkf.js";import"./select-Cce2oJH8.js";import"./index-Bi2U6H-I.js";import"./index-CAh_ZuFR.js";import"./index-Lcj1GtjH.js";import"./index-Ct7uzItS.js";import"./createLucideIcon-D1MVXgdA.js";import"./index-D1LanMWQ.js";import"./index-BwobEAja.js";function I(){const[o,c]=r.useState([]),[a,v]=r.useState(""),l=N("(min-width: 768px)");r.useEffect(()=>{(async()=>{try{const i=await d.get("/api/client-dashboard-jobs");c(i.data)}catch{h.error("Failed to fetch jobs.")}})()},[]);const t=o.filter(s=>s.job_id.toLowerCase().includes(a.toLowerCase())||s.address.toLowerCase().includes(a.toLowerCase())),n=s=>{switch(s){case"Needs Scheduling":case"Request Pending":return"bg-blue-100 text-blue-800 border-blue-200";case"Scheduled":return"bg-orange-100 text-orange-800 border-orange-200";case"Postponed":case"Cancelled":return"bg-red-100 text-red-800 border-red-200";case"Collected":case"Processing":case"Complete":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("section",{className:"bg-white border shadow rounded-lg",children:[e.jsx("header",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Your Collection Requests"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View your current collection requests and their status."})]})})}),e.jsx(m,{}),e.jsx("div",{className:"p-6",children:l?e.jsx(x,{columns:p,data:t}):e.jsx("div",{className:"grid gap-4",children:t.length>0?t.map(s=>e.jsxs(f,{className:"overflow-hidden",children:[e.jsxs(g,{className:"p-0",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:e.jsx("a",{href:`/collections/${s.id}`,className:"hover:underline",children:s.job_id})}),e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${n(s.job_status)}`,children:s.job_status})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(b,{className:"h-4 w-4 mt-0.5 text-gray-500"}),e.jsx("span",{className:"text-sm",children:`${s.address}, ${s.town_city}, ${s.postcode}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.collection_date?new Date(s.collection_date).toLocaleDateString():"Not Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.items_count||0," items"]})]})]})]}),e.jsx(j,{className:"flex justify-end p-4 pt-0",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/collections/${s.id}`,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"View Details"]})})]},s.id)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No collection requests found"})})})]})}export{I as default};
