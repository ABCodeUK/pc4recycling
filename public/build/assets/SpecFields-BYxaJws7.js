import{r as t,j as e,b as w}from"./app-CxxjQbGd.js";import{S as Q,A as X,a as Y,b as Z,B as ee,c as se,d as f,e as g,f as y}from"./breadcrumb-CVfpatPu.js";import{S as T}from"./separator-OWjsBv_k.js";import{B as d}from"./button-BfCUFj2v.js";import{I as o}from"./input-DPP4pqCX.js";import{L as _}from"./label-2wttpgDy.js";import{DataTable as re}from"./data-table-4y23JPgH.js";import{columns as ae}from"./columns-Dquc9iXh.js";import te from"./VariablesNavigation-BdyRv2HG.js";import{D as I,a as ie,b as B,c as P,d as L,e as O,f as V}from"./dialog-0RdKrRPh.js";import{A as le,a as ce,b as de,c as ne,d as oe,e as pe,f as me,g as he,h as xe}from"./alert-dialog-IHHWyKpT.js";import{t as i}from"./index-CGbDflUn.js";import{S as ue}from"./square-pen-DlkBvHz6.js";import{T as je}from"./trash-2-BuUhqBcA.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-uXkLkjFM.js";import"./createLucideIcon-YMZQpf5O.js";import"./index-CpwjmW8Z.js";import"./Combination-DnQhWoyI.js";import"./index-Drt13xjj.js";import"./index-DdQz_MXT.js";import"./index-Dy7fGhxC.js";import"./index-BlL_lDRx.js";import"./index---YqbKSt.js";import"./table-B3GsT3Yk.js";import"./select-CnJHFvlZ.js";import"./arrow-up-down-BHNPgGYQ.js";function Ge({specFields:z}){const[H,S]=t.useState(()=>[...z].sort((s,r)=>(r.spec_default?1:0)-(s.spec_default?1:0)||Number(s.spec_order)-Number(r.spec_order))),[b,A]=t.useState({spec_name:"",spec_order:"",spec_default:!1}),[F,E]=t.useState({spec_name:"",spec_order:"",spec_default:!1}),[l,p]=t.useState({spec_name:"",spec_order:""}),[N,$]=t.useState(""),[fe,m]=t.useState(!1),[D,k]=t.useState(null),[q,h]=t.useState(!1),[M,x]=t.useState(!1),u=()=>{p({spec_name:"",spec_order:""})},v=()=>{A({spec_name:"",spec_order:"",spec_default:!1}),u()},j=(s,r)=>{const{name:a,value:c}=s.target;r==="add"?A(n=>({...n,[a]:c})):E(n=>({...n,[a]:c})),p(n=>({...n,[a]:""}))},R=s=>{$(s.target.value)},U=async()=>{u();try{m(!0);const s=await w.post("/settings/variables/spec-fields",b);if(s.status===200){const r=s.data;S(a=>[...a,r].sort(C)),v(),h(!1),i.success("Spec Field successfully created!")}else i.error("Failed to create Spec Field. Please try again.")}catch(s){s.response&&s.response.data.errors?p(s.response.data.errors):i.error("Error creating Spec Field. Please check the logs.")}finally{m(!1)}},W=async()=>{if(D){u();try{m(!0);const s=await w.put(`/settings/variables/spec-fields/${D}`,F);if(s.status===200){const r=s.data;S(a=>[...a.map(c=>c.id===D?r:c)].sort(C)),k(null),x(!1),i.success("Spec Field successfully updated!")}else i.error("Failed to update Spec Field. Please try again.")}catch(s){s.response&&s.response.data.errors?p(s.response.data.errors):i.error("Error updating Spec Field. Please check the logs.")}finally{m(!1)}}},G=async s=>{try{(await w.delete(`/settings/variables/spec-fields/${s}`)).status===200?(S(a=>a.filter(c=>c.id!==s).sort(C)),i.success("Spec Field successfully deleted!")):i.error("Failed to delete Spec Field. Please try again.")}catch{i.error("Error deleting Spec Field. Please check the logs.")}},J=H.filter(s=>s.spec_name.toLowerCase().includes(N.toLowerCase())||s.spec_order.toString().includes(N.toLowerCase())),C=(s,r)=>(r.spec_default?1:0)-(s.spec_default?1:0)||Number(s.spec_order)-Number(r.spec_order),K=[...ae,{id:"actions",header:"Actions",cell:({row:s})=>{const r=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:r.spec_default,className:r.spec_default?"opacity-50 cursor-not-allowed":"",onClick:()=>{E({spec_name:r.spec_name,spec_order:r.spec_order,spec_default:r.spec_default}),u(),k(r.id),x(!0)},children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsxs(le,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(d,{variant:"destructive",size:"sm",disabled:r.spec_default,className:r.spec_default?"opacity-50 cursor-not-allowed":"",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(de,{children:[e.jsxs(ne,{children:[e.jsx(oe,{children:"Confirm Deletion"}),e.jsxs(pe,{children:["Are you sure you want to delete Spec Field"," ",e.jsx("b",{children:r.spec_name}),"?"]})]}),e.jsxs(me,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(xe,{onClick:()=>G(r.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(Q,{children:[e.jsx(X,{}),e.jsxs(Y,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Z,{className:"-ml-1"}),e.jsx(T,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(f,{children:e.jsx(g,{href:"/",children:"Dashboard"})}),e.jsx(y,{}),e.jsx(f,{children:e.jsx(g,{href:"/settings",children:"Settings"})}),e.jsx(y,{}),e.jsx(f,{children:e.jsx(g,{href:"/settings/variables",children:"Variables"})}),e.jsx(y,{}),e.jsx(f,{children:e.jsx(g,{href:"/settings/variables/spec-fields",children:"Spec Fields"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(te,{currentTab:"spec-fields"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage Spec Fields"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete Spec Fields used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{placeholder:"Search Spec Fields...",value:N,onChange:R,className:"max-w-sm"}),e.jsxs(I,{open:q,onOpenChange:s=>{s||v(),h(s)},children:[e.jsx(ie,{asChild:!0,children:e.jsx(d,{onClick:()=>h(!0),children:"Add Spec Field"})}),e.jsxs(B,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(P,{children:[e.jsx(L,{children:"Add Spec Field"}),e.jsx(O,{children:"Fill in the details for the new Spec Field below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"spec_name",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"spec_name",name:"spec_name",value:b.spec_name,onChange:s=>j(s,"add")}),l.spec_name&&e.jsx("p",{className:"text-red-600 text-sm",children:l.spec_name})]}),e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"spec_order",children:["Order ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"spec_order",name:"spec_order",value:b.spec_order,onChange:s=>j(s,"add")}),l.spec_order&&e.jsx("p",{className:"text-red-600 text-sm",children:l.spec_order})]})]})]}),e.jsxs(V,{children:[e.jsx(d,{variant:"outline",onClick:()=>{v(),h(!1)},children:"Cancel"}),e.jsx(d,{onClick:U,children:"Create Spec Field"})]})]})]})]})]}),e.jsx(T,{className:"my-4"}),e.jsx(re,{columns:K,data:J})]}),e.jsx(I,{open:M,onOpenChange:x,children:e.jsxs(B,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(P,{children:[e.jsx(L,{children:"Edit Spec Field"}),e.jsx(O,{children:"Update the details for the Spec Field below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"spec_name_edit",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"spec_name_edit",name:"spec_name",value:F.spec_name,onChange:s=>j(s,"edit")}),l.spec_name&&e.jsx("p",{className:"text-red-600 text-sm",children:l.spec_name})]}),e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"spec_order_edit",children:["Order ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"spec_order_edit",name:"spec_order",value:F.spec_order,onChange:s=>j(s,"edit")}),l.spec_order&&e.jsx("p",{className:"text-red-600 text-sm",children:l.spec_order})]})]})]}),e.jsxs(V,{children:[e.jsx(d,{variant:"outline",onClick:()=>{x(!1)},children:"Cancel"}),e.jsx(d,{onClick:W,children:"Save Changes"})]})]})})]})]})]})}export{Ge as default};
