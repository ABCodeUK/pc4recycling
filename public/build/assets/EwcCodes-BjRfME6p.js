import{r as t,j as e,b as v}from"./app-Cma8V3l9.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as u,e as j,f as N}from"./breadcrumb-Cr6GXjz3.js";import{S as F}from"./separator-CEPuzrhi.js";import{B as c}from"./button-DS1ZOJ9c.js";import{I as S}from"./input-_RUYSLpp.js";import{L as g}from"./label-IUEK5zVZ.js";import{DataTable as se}from"./data-table-C5ygb8zm.js";import{columns as re}from"./columns-By08QKsK.js";import ae from"./VariablesNavigation-xlLQR5_i.js";import{D as k,a as te,b as T,c as I,d as B,e as L,f as P}from"./dialog-C3tgJ_8I.js";import{A as ie,a as oe,b as de,c as ce,d as le,e as ne,f as me,g as he,h as xe}from"./alert-dialog-BGiwvZFs.js";import{t as i}from"./index-C_iezvca.js";import{S as pe}from"./square-pen-DsVzVgxC.js";import{T as ue}from"./trash-2-DUTB_MOx.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-BH7C-wFc.js";import"./createLucideIcon-BnM-jrHn.js";import"./index-jFmiJHnk.js";import"./index-rOaI9F-v.js";import"./index-BUxlmQ7d.js";import"./index-Dp-u-l4U.js";import"./index-DHxxav9I.js";import"./index-CoYLIXTa.js";import"./index-CJRq-bCV.js";import"./index-Cdv8n69u.js";import"./index-CIrE5OO0.js";import"./calendar-TwlUnTX4.js";import"./table-vJebbvAp.js";import"./select-DcwlFvdE.js";import"./index-CrYhDhYK.js";import"./arrow-up-down-BNv_JWN3.js";import"./tabs-sJVBdolV.js";function Qe({ewcCodes:O}){const[V,C]=t.useState(O),[f,y]=t.useState({ewc_code:"",ea_description:""}),[b,A]=t.useState({ewc_code:"",ea_description:""}),[o,n]=t.useState({ewc_code:"",ea_description:""}),[w,z]=t.useState(""),[je,m]=t.useState(!1),[_,W]=t.useState(null),[H,E]=t.useState(!1),[$,h]=t.useState(!1),x=()=>{n({ewc_code:"",ea_description:""})},D=()=>{y({ewc_code:"",ea_description:""}),x()},p=(s,r)=>{const{name:a,value:d}=s.target;r==="add"?y(l=>({...l,[a]:d})):A(l=>({...l,[a]:d})),n(l=>({...l,[a]:""}))},q=s=>{z(s.target.value)},M=async()=>{x();try{m(!0);const s=await v.post("/settings/variables/ewc-codes",f);if(s.status===200){const r=s.data;C(a=>[...a,r]),D(),E(!1),i.success("EWC Code successfully created!")}else i.error("Failed to create EWC Code. Please try again.")}catch(s){s.response&&s.response.data.errors?n(s.response.data.errors):i.error("Error creating EWC Code. Please check the logs.")}finally{m(!1)}},R=async()=>{if(_){x();try{m(!0);const s=await v.put(`/settings/variables/ewc-codes/${_}`,b);if(s.status===200){const r=s.data;C(a=>a.map(d=>d.id===_?r:d)),W(null),h(!1),i.success("EWC Code successfully updated!")}else i.error("Failed to update EWC Code. Please try again.")}catch(s){s.response&&s.response.data.errors?n(s.response.data.errors):i.error("Error updating EWC Code. Please check the logs.")}finally{m(!1)}}},U=async s=>{try{(await v.delete(`/settings/variables/ewc-codes/${s}`)).status===200?(C(a=>a.filter(d=>d.id!==s)),i.success("EWC Code successfully deleted!")):i.error("Failed to delete EWC Code. Please try again.")}catch{i.error("Error deleting EWC Code. Please check the logs.")}},G=V.filter(s=>s.ewc_code.toLowerCase().includes(w.toLowerCase())||s.ea_description.toLowerCase().includes(w.toLowerCase())),J=[...re,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const r=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{A({ewc_code:r.ewc_code,ea_description:r.ea_description}),x(),W(r.id),h(!0)},children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsxs(ie,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(c,{variant:"destructive",size:"sm",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsxs(de,{children:[e.jsxs(ce,{children:[e.jsx(le,{children:"Confirm Deletion"}),e.jsxs(ne,{children:["Are you sure you want to delete EWC Code ",e.jsx("b",{children:r.ewc_code}),"?"]})]}),e.jsxs(me,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(xe,{onClick:()=>U(r.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(F,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(u,{children:e.jsx(j,{href:"/",children:"Dashboard"})}),e.jsx(N,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(N,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings/variables",children:"Variables"})}),e.jsx(N,{className:"hidden md:block"}),e.jsx(u,{children:e.jsx(j,{href:"/settings/variables/ewc-codes",children:"EWC Codes"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(ae,{currentTab:"ewc-codes"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage EWC Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete EWC codes used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{placeholder:"Search EWC Codes...",value:w,onChange:q,className:"max-w-sm"}),e.jsxs(k,{open:H,onOpenChange:s=>{s||D(),E(s)},children:[e.jsx(te,{asChild:!0,children:e.jsx(c,{children:"Add EWC Code"})}),e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Add EWC Code"}),e.jsx(L,{children:"Fill in the details for the new EWC Code below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ewc_code",children:"EWC Code"}),e.jsx(S,{id:"ewc_code",name:"ewc_code",value:f.ewc_code,onChange:s=>p(s,"add")}),o.ewc_code&&e.jsx("p",{className:"text-red-600 text-sm",children:o.ewc_code})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ea_description",children:"EA Description"}),e.jsx("textarea",{id:"ea_description",name:"ea_description",value:f.ea_description,onChange:s=>p(s,"add"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),o.ea_description&&e.jsx("p",{className:"text-red-600 text-sm",children:o.ea_description})]})]})}),e.jsxs(P,{children:[e.jsx(c,{variant:"outline",onClick:()=>{D(),E(!1)},children:"Cancel"}),e.jsx(c,{onClick:M,children:"Create EWC Code"})]})]})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(k,{open:$,onOpenChange:h,children:e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Edit EWC Code"}),e.jsx(L,{children:"Update the details for the EWC Code below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ewc_code_edit",children:"EWC Code"}),e.jsx(S,{id:"ewc_code_edit",name:"ewc_code",value:b.ewc_code,onChange:s=>p(s,"edit")}),o.ewc_code&&e.jsx("p",{className:"text-red-600 text-sm",children:o.ewc_code})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ea_description_edit",children:"EA Description"}),e.jsx("textarea",{id:"ea_description_edit",name:"ea_description",value:b.ea_description,onChange:s=>p(s,"edit"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),o.ea_description&&e.jsx("p",{className:"text-red-600 text-sm",children:o.ea_description})]})]})}),e.jsxs(P,{children:[e.jsx(c,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(c,{onClick:R,children:"Save Changes"})]})]})})]})]})]})}export{Qe as default};
