import{r as a,j as e,b as N}from"./app-DUv4C8zR.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as C,e as y,f as S}from"./breadcrumb-BeSrBSyR.js";import{S as E}from"./separator-52U-weNF.js";import{B as n}from"./button-ByXYoKeZ.js";import{I as m}from"./input-ER8UZmlu.js";import{L as b}from"./label-Dmu6HX2v.js";import{DataTable as se}from"./data-table-BWEWGduo.js";import{columns as te}from"./columns-CR97MFa7.js";import le from"./VariablesNavigation-lMuEuVV3.js";import{D as k,a as re,b as I,c as B,d as L,e as P,f as O}from"./dialog-BeE9kzvs.js";import{A as ae,a as oe,b as ie,c as ne,d as ce,e as de,f as me,g as pe,h as he}from"./alert-dialog-CJpxWzU0.js";import{t as o}from"./index-DfymCQFU.js";import{S as xe}from"./square-pen-D_BQbCxq.js";import{T as je}from"./trash-2-DBI7At-f.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-B9HSr1Oe.js";import"./createLucideIcon-D1MVXgdA.js";import"./index-Bi2U6H-I.js";import"./index-Lcj1GtjH.js";import"./index-Ct7uzItS.js";import"./index-XC-7eegb.js";import"./index-DeR6T8Ux.js";import"./index-5RnjzhFd.js";import"./index-CAh_ZuFR.js";import"./index-CKfW5HuH.js";import"./calendar-Blwv3BR4.js";import"./table-BXRjnKkf.js";import"./select-Cce2oJH8.js";import"./index-D1LanMWQ.js";import"./arrow-up-down-BWvk7nKp.js";import"./tabs-Cx5nvXT-.js";function Ke({collectionTypes:V}){const[z,_]=a.useState(V),[c,w]=a.useState({colt_name:"",colt_description:""}),[p,A]=a.useState({colt_name:"",colt_description:""}),[i,h]=a.useState({colt_name:"",colt_description:""}),[D,H]=a.useState(""),[ge,x]=a.useState(!1),[T,F]=a.useState(null),[U,j]=a.useState(!1),[$,g]=a.useState(!1),u=()=>h({colt_name:"",colt_description:""}),v=()=>{w({colt_name:"",colt_description:""}),u()},f=(s,t)=>{const{name:l,value:r}=s.target;t==="add"?w(d=>({...d,[l]:r})):A(d=>({...d,[l]:r})),h(d=>({...d,[l]:""}))},q=s=>H(s.target.value),M=async()=>{var s;u();try{x(!0),console.log("Form data being submitted:",{name:c.colt_name,description:c.colt_description,fullData:c});const t=await N.post("/settings/variables/collection-types",c);if(t.status===200){const l=t.data;_(r=>[...r,l]),v(),j(!1),o.success("Collection Type successfully created!")}else o.error("Failed to create Collection Type. Please try again.")}catch(t){console.error("Error response:",(s=t.response)==null?void 0:s.data),t.response&&t.response.data.errors?h(t.response.data.errors):o.error("Error creating Collection Type. Please check the logs.")}finally{x(!1)}},R=async()=>{if(T){u();try{x(!0),console.log("Updating data:",p);const s=await N.put(`/settings/variables/collection-types/${T}`,p);if(s.status===200){const t=s.data;_(l=>l.map(r=>r.id===T?t:r)),F(null),g(!1),o.success("Collection Type successfully updated!")}else o.error("Failed to update Collection Type. Please try again.")}catch(s){s.response&&s.response.data.errors?h(s.response.data.errors):o.error("Error updating Collection Type. Please check the logs.")}finally{x(!1)}}},W=async s=>{try{(await N.delete(`/settings/variables/collection-types/${s}`)).status===200?(_(l=>l.filter(r=>r.id!==s)),o.success("Collection Type successfully deleted!")):o.error("Failed to delete Collection Type. Please try again.")}catch{o.error("Error deleting Collection Type. Please check the logs.")}},G=z.filter(s=>((s==null?void 0:s.colt_name)??"").toLowerCase().includes(D.toLowerCase())||((s==null?void 0:s.colt_description)??"").toLowerCase().includes(D.toLowerCase())),J=[...te,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{A({colt_name:t.colt_name,colt_description:t.colt_description||""}),u(),F(t.id),g(!0)},children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsxs(ae,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(ie,{children:[e.jsxs(ne,{children:[e.jsx(ce,{children:"Confirm Deletion"}),e.jsxs(de,{children:["Are you sure you want to delete Collection Type"," ",e.jsx("b",{children:t.colt_name}),"?"]})]}),e.jsxs(me,{children:[e.jsx(pe,{children:"Cancel"}),e.jsx(he,{onClick:()=>W(t.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(E,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(C,{children:e.jsx(y,{href:"/",children:"Dashboard"})}),e.jsx(S,{className:"hidden md:block"}),e.jsx(C,{children:e.jsx(y,{href:"/settings",children:"Settings"})}),e.jsx(S,{className:"hidden md:block"}),e.jsx(C,{children:e.jsx(y,{href:"/settings/variables",children:"Variables"})}),e.jsx(S,{className:"hidden md:block"}),e.jsx(C,{children:e.jsx(y,{href:"/settings/variables/collection-types",children:"Collection Types"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(le,{currentTab:"collection-types"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage Collection Types"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete Collection Types used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{placeholder:"Search Collection Types...",value:D,onChange:q,className:"max-w-sm"}),e.jsxs(k,{open:U,onOpenChange:s=>{s||v(),j(s)},children:[e.jsx(re,{asChild:!0,children:e.jsx(n,{onClick:()=>j(!0),children:"Add Collection Type"})}),e.jsxs(I,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(B,{children:[e.jsx(L,{children:"Add Collection Type"}),e.jsx(P,{children:"Fill in the details for the new Collection Type below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs(b,{htmlFor:"colt_name",children:["Collection Type Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"colt_name",name:"colt_name",value:c.colt_name,onChange:s=>f(s,"add")}),i.colt_name&&e.jsx("p",{className:"text-red-600 text-sm",children:i.colt_name})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"colt_description",children:"Description"}),e.jsx(m,{id:"colt_description",name:"colt_description",value:c.colt_description,onChange:s=>f(s,"add")}),i.colt_description&&e.jsx("p",{className:"text-red-600 text-sm",children:i.colt_description})]})]})}),e.jsxs(O,{children:[e.jsx(n,{variant:"outline",onClick:()=>{v(),j(!1)},children:"Cancel"}),e.jsx(n,{onClick:M,children:"Create Collection Type"})]})]})]})]})]}),e.jsx(E,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(k,{open:$,onOpenChange:g,children:e.jsxs(I,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(B,{children:[e.jsx(L,{children:"Edit Collection Type"}),e.jsx(P,{children:"Update the details for the Collection Type below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs(b,{htmlFor:"colt_name_edit",children:["Collection Type Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"colt_name_edit",name:"colt_name",value:p.colt_name,onChange:s=>f(s,"edit")}),i.colt_name&&e.jsx("p",{className:"text-red-600 text-sm",children:i.colt_name})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"colt_description_edit",children:"Description"}),e.jsx(m,{id:"colt_description_edit",name:"colt_description",value:p.colt_description,onChange:s=>f(s,"edit")}),i.colt_description&&e.jsx("p",{className:"text-red-600 text-sm",children:i.colt_description})]})]})]}),e.jsxs(O,{children:[e.jsx(n,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(n,{onClick:R,children:"Save Changes"})]})]})})]})]})]})}export{Ke as default};
