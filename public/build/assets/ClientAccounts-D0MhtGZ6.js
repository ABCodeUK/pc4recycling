import{r,j as e,b as I}from"./app-CxxjQbGd.js";import{S as L,A as T,a as k,b as P,B as O,c as $,d as C,e as N,f as q}from"./breadcrumb-CVfpatPu.js";import{S as w}from"./separator-OWjsBv_k.js";import{B as n}from"./button-BfCUFj2v.js";import{I as o}from"./input-DPP4pqCX.js";import{L as u}from"./label-2wttpgDy.js";import{DataTable as z}from"./data-table-CoXYUB1n.js";import{columns as H}from"./columns-5plyuvvT.js";import{D as R,a as U,b as W,c as G,d as J,e as K,f as M}from"./dialog-0RdKrRPh.js";import{t as p}from"./index-CGbDflUn.js";import{E as Q}from"./eye-CPdCNAC_.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-uXkLkjFM.js";import"./createLucideIcon-YMZQpf5O.js";import"./index-CpwjmW8Z.js";import"./Combination-DnQhWoyI.js";import"./index-Drt13xjj.js";import"./index-DdQz_MXT.js";import"./index-Dy7fGhxC.js";import"./index-BlL_lDRx.js";import"./index---YqbKSt.js";import"./table-B3GsT3Yk.js";import"./select-CnJHFvlZ.js";import"./arrow-up-down-BHNPgGYQ.js";function Se({clients:v,currentUserId:V}){const[S,D]=r.useState(v),[i,j]=r.useState({name:"",email:"",contact_name:""}),[t,l]=r.useState({name:"",email:"",contact_name:""}),[c,A]=r.useState(""),[X,f]=r.useState(!1),[y,m]=r.useState(!1),g=()=>l({name:"",email:"",contact_name:""}),b=()=>{j({name:"",email:"",contact_name:""}),g()},d=s=>{const{name:a,value:h}=s.target;j(x=>({...x,[a]:h})),l(x=>({...x,[a]:""}))},F=s=>{A(s.target.value)},_=async()=>{g();try{f(!0);const s=await I.post("/customers/store",i);if(s.status===200){const a=s.data;D(h=>[...h,a]),p.success("Client successfully added!"),m(!1),a.id?window.location.href=`/customers/${a.id}/edit`:console.error("New client ID is missing")}else p.error("Failed to add client. Please try again.")}catch(s){s.response&&s.response.data.errors?l(s.response.data.errors):p.error("Error adding client. Please check the logs.")}finally{f(!1)}},B=S.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())||s.email.toLowerCase().includes(c.toLowerCase())),E=[...H,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const a=s.original;return e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(n,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/customers/${a.id}`,children:e.jsx(Q,{className:"h-4 w-4"})})})}}];return e.jsxs(L,{children:[e.jsx(T,{}),e.jsxs(k,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(P,{className:"-ml-1"}),e.jsx(w,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(O,{children:e.jsxs($,{children:[e.jsx(C,{children:e.jsx(N,{href:"/",children:"Dashboard"})}),e.jsx(q,{}),e.jsx(C,{children:e.jsx(N,{href:"/customers",children:"Customers"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Customers"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Customers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Below is a list of all customers on the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{placeholder:"Search Customers...",value:c,onChange:F,className:"max-w-sm"}),e.jsxs(R,{open:y,onOpenChange:s=>{s||b(),m(s)},children:[e.jsx(U,{asChild:!0,children:e.jsx(n,{children:"Add New Customer"})}),e.jsxs(W,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(G,{children:[e.jsx(J,{children:"Add new customer"}),e.jsx(K,{children:"Fill in the details for the new client below."})]}),e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Company Name"}),e.jsx(o,{id:"name",name:"name",value:i.name,onChange:d}),t.name&&e.jsx("p",{className:"text-red-600 text-sm",children:t.name})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"contact_name",children:"Contact Name"}),e.jsx(o,{id:"contact_name",name:"contact_name",value:i.contact_name,onChange:d,required:!0}),t.contact_name&&e.jsx("p",{className:"text-red-600 text-sm",children:t.contact_name})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",name:"email",value:i.email,onChange:d}),t.email&&e.jsx("p",{className:"text-red-600 text-sm",children:t.email})]})]})}),e.jsxs(M,{children:[e.jsx(n,{variant:"outline",onClick:()=>{b(),m(!1)},children:"Cancel"}),e.jsx(n,{onClick:_,children:"Create Client"})]})]})]})]})]}),e.jsx(w,{className:"my-4"}),e.jsx(z,{columns:E,data:B})]})]})]})]})}export{Se as default};
