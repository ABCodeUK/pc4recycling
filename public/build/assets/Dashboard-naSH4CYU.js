import{u as E,r as x,j as e,b as I}from"./app-CNWjOMNx.js";import{S as N,A as w,a as k,b as v,B as D,c as C,d as M,e as S,g as B,R as o,C as P}from"./breadcrumb-BRBq9mE3.js";import{S as T}from"./separator-BPue9knr.js";import{C as r,a,b as i,d as l}from"./card-CqhpnQ3x.js";import U from"./UpcomingJobs-CJXeuMHg.js";import z from"./DriverJobs-CCV1OOag.js";import F from"./ClientJobs-BZSMVpHa.js";import{c}from"./createLucideIcon-ClQ1hqbp.js";import"./index-DROTMuiR.js";import"./index-DUDCROMg.js";import"./button-Cif8vmUM.js";import"./index-DPKFiV9N.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./input-CKARXW-H.js";import"./dialog-BfgzRhkV.js";import"./index-D-4-NTWd.js";import"./index-CnljWFNF.js";import"./index-BHpFse_T.js";import"./index-BJMVI5o3.js";import"./index-CmDO7QdU.js";import"./index-CNsmnkFI.js";import"./index-BqYSSVB3.js";import"./index-D0kbjZ6r.js";import"./calendar-BUGi4wxL.js";import"./data-table-Dy3OlIh6.js";import"./table-B5rCecqS.js";import"./select-DyBRev3z.js";import"./index-BflIAMo0.js";import"./columns-DekcD3Vo.js";import"./arrow-up-down-B8GbFRXv.js";import"./user-wgCuhKwY.js";import"./eye-B3TLv2b1.js";import"./data-table-DNY-mQWd.js";import"./Columns-DdQdOo6i.js";import"./use-media-query-C7Q6z7Lo.js";import"./Columns-1gmqtoTc.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=c("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=c("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=c("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=c("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=c("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function Me(){var h,p,j,f,b,y,u,g;const{user:s,refreshUserData:Y,isInitialized:m}=E(),[t,R]=x.useState({jobsThisYear:0,jobsLast30Days:0,upcomingCollections:0,completedJobsThisYear:0,recentJobs:[]});return x.useEffect(()=>{var d;(d=s==null?void 0:s.staffDetails)!=null&&d.role||Y()},[]),x.useEffect(()=>{(async()=>{try{const n=await I.get("/api/dashboard-metrics");R(n.data)}catch(n){console.error("Failed to fetch dashboard metrics:",n)}})()},[]),console.log("Dashboard user data:",{user:s,staffDetails:s==null?void 0:s.staffDetails,role:(h=s==null?void 0:s.staffDetails)==null?void 0:h.role,roleName:(j=(p=s==null?void 0:s.staffDetails)==null?void 0:p.role)==null?void 0:j.name,isInitialized:m}),m?e.jsxs(N,{children:[e.jsx(w,{}),e.jsxs(k,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(v,{className:"-ml-1"}),e.jsx(T,{orientation:"vertical",className:"mr-2 h-4"}),e.jsx(D,{children:e.jsx(C,{children:e.jsx(M,{children:e.jsx(S,{href:"#",children:"Dashboard"})})})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8 w-100",children:[!(s!=null&&s.active)&&e.jsxs(r,{className:"border-red-200 bg-red-50",children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-red-800",children:"Account Disabled"}),e.jsx(O,{className:"h-4 w-4 text-red-800"})]}),e.jsx(l,{children:e.jsx("p",{className:"text-sm text-red-800",children:"This account is currently disabled. Please contact PC4 Recycling for further help and information."})})]}),e.jsxs(B,{children:[e.jsx(o,{role:"Developer|Administrator|Employee|Manager|Director",children:e.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Staff Dashboard"})}),e.jsx(o,{role:"Drivers",children:e.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Driver Dashboard"})}),e.jsxs(o,{role:"Developer|Administrator|Employee|Manager|Director",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Jobs This Year"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.jobsThisYear}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jobs in ",e.jsx("b",{children:new Date().getFullYear()})]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Recent Jobs"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.jobsLast30Days}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Jobs in the last 30 days"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Upcoming Collections"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.upcomingCollections}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled collections"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Completed Jobs"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.completedJobsThisYear}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Completed in ",e.jsx("b",{children:new Date().getFullYear()})]})]})]})]}),e.jsx(U,{})]}),e.jsx(o,{role:"Drivers",children:e.jsx(z,{})})]}),e.jsxs(P,{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Client Dashboard"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Lifetime Items Recycled"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(f=t.clientMetrics)==null?void 0:f.lifetimeItemsRecycled}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total items recycled with us."})]})]}),(s==null?void 0:s.sustainability)===1&&e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Carbon Savings"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:(y=(b=t.clientMetrics)==null?void 0:b.carbonSavings)==null?void 0:y.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"lbs COâ‚‚ offset based on device weights and processing methods this year."})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Jobs Comparison"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(u=t.clientMetrics)==null?void 0:u.jobsThisYear}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["vs ",(g=t.clientMetrics)==null?void 0:g.jobsLastYear," last year."]})]})]})]}),e.jsx(F,{})]})]})]})]}):e.jsxs(N,{children:[e.jsx(w,{}),e.jsxs(k,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(v,{className:"-ml-1"}),e.jsx(T,{orientation:"vertical",className:"mr-2 h-4"}),e.jsx(D,{children:e.jsx(C,{children:e.jsx(M,{children:e.jsx(S,{href:"#",children:"Dashboard"})})})})]}),e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:e.jsx("p",{children:"Loading dashboard..."})})]})]})}export{Me as default};
