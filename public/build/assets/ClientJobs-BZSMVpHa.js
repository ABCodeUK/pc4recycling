import{r,j as e,b as x}from"./app-CNWjOMNx.js";import{S as p}from"./separator-BPue9knr.js";import{DataTable as h}from"./data-table-DNY-mQWd.js";import{clientJobColumns as u}from"./Columns-1gmqtoTc.js";import{t as f}from"./index-DROTMuiR.js";import{B as g}from"./button-Cif8vmUM.js";import{C as j,d as N,e as b}from"./card-CqhpnQ3x.js";import{u as w,M as y,P as C}from"./use-media-query-C7Q6z7Lo.js";import{C as v}from"./calendar-BUGi4wxL.js";import{E as S}from"./eye-B3TLv2b1.js";import"./index-BHpFse_T.js";import"./index-DUDCROMg.js";import"./utils-CytzSlOG.js";import"./table-B5rCecqS.js";import"./select-DyBRev3z.js";import"./index-D-4-NTWd.js";import"./index-CmDO7QdU.js";import"./index-DPKFiV9N.js";import"./index-CNsmnkFI.js";import"./createLucideIcon-ClQ1hqbp.js";import"./index-BqYSSVB3.js";import"./index-CnljWFNF.js";import"./index-BflIAMo0.js";import"./index-BwobEAja.js";function W(){const[o,i]=r.useState([]),[a,_]=r.useState(""),c=w("(min-width: 768px)");r.useEffect(()=>{(async()=>{try{const d=(await x.get("/api/client-dashboard-jobs")).data.filter(m=>!m.job_status.toLowerCase().includes("quote"));i(d)}catch{f.error("Failed to fetch jobs.")}})()},[]);const t=o.filter(s=>s.job_id.toLowerCase().includes(a.toLowerCase())||s.address.toLowerCase().includes(a.toLowerCase())),l=s=>{switch(s){case"Needs Scheduling":case"Request Pending":return"bg-blue-100 text-blue-800 border-blue-200";case"Scheduled":return"bg-orange-100 text-orange-800 border-orange-200";case"Postponed":case"Cancelled":return"bg-red-100 text-red-800 border-red-200";case"Collected":case"Processing":case"Complete":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("section",{className:"bg-white border shadow rounded-lg",children:[e.jsx("header",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Your Collections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View your collections and their status."})]})})}),e.jsx(p,{}),e.jsx("div",{className:"p-6",children:c?e.jsx(h,{columns:u,data:t}):e.jsx("div",{className:"grid gap-4",children:t.length>0?t.map(s=>e.jsxs(j,{className:"overflow-hidden",children:[e.jsxs(N,{className:"p-0",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:e.jsx("a",{href:`/collections/${s.id}`,className:"hover:underline",children:s.job_id})}),e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${l(s.job_status)}`,children:s.job_status})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"h-4 w-4 mt-0.5 text-gray-500"}),e.jsx("span",{className:"text-sm",children:`${s.address}, ${s.town_city}, ${s.postcode}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.collection_date?new Date(s.collection_date).toLocaleDateString():"Not Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.items_count||0," items"]})]})]})]}),e.jsx(b,{className:"flex justify-end p-4 pt-0",children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/collections/${s.id}`,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"View Details"]})})]},s.id)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No collection requests found"})})})]})}export{W as default};
