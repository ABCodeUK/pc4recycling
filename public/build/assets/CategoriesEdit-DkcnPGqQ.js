import{j as e,r as j,b as A}from"./app-DGedXpK6.js";import{S as M,A as H,a as V,b as W,B as R,c as z,d as m,e as h,f as u}from"./breadcrumb-DVHq5Awm.js";import{S as f}from"./separator-Qg1edzKM.js";import{B as v}from"./button-DjXm1grC.js";import{I as o}from"./input-CkBA5yRJ.js";import{L as l}from"./label-Ct80BZdK.js";import{S as F,a as I,b as B,c as E,d}from"./select-DuTKz2sq.js";import{M as L}from"./multiple-select-CRjNZOD9.js";import G from"./SubCategories-Ff0TcnLw.js";import{t as c}from"./index-B34HRg7w.js";import{A as J,a as K,b as O,c as Q,d as U,e as X,f as Y,g as Z,h as ee}from"./alert-dialog-FwAlGMcx.js";import{A as se}from"./arrow-left-DY8IiIyw.js";import{S as ae}from"./save-DAP7lMw6.js";import{T as ie}from"./trash-2-CE_77rkt.js";import"./index-Dx4p5O6H.js";import"./index-BOJ2gww-.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-D1brpkaJ.js";import"./createLucideIcon-C-iaKTyE.js";import"./index-BNfd2_2U.js";import"./index-CLFtQT3G.js";import"./index-Crf3phMa.js";import"./index-B_qNjpXx.js";import"./index-CvV_Mgk0.js";import"./index-DYpMfZUf.js";import"./badge-D5z1vypp.js";import"./dialog-CjHGOGdp.js";import"./data-table-C3LH9UBW.js";import"./table-Cj_Afe3x.js";import"./columns-BK0_GQcH.js";import"./square-pen-DAP9x76s.js";function $e({category:i,ewcCodes:N,hpCodes:x,specFields:p}){var y,w,D;if(!i||!N||!x||!p)return e.jsx("div",{children:"Loading..."});const[r,g]=j.useState({name:i.name||"",default_weight:i.default_weight||"",ewc_code_id:((y=i.ewc_code)==null?void 0:y.id)||"",physical_form:i.physical_form||"",concentration:i.concentration||"",chemical_component:i.chemical_component||"",container_type:i.container_type||"",hp_codes:((w=i.hp_codes)==null?void 0:w.map(s=>s.id))||[],spec_fields:((D=i.spec_fields)==null?void 0:D.map(s=>s.id))||[]}),[T,_]=j.useState(!1),[P,b]=j.useState(!1),n=s=>{const{name:a,value:t}=s.target;g(q=>({...q,[a]:t}))},C=(s,a)=>{g(t=>({...t,[s]:a}))},S=(s,a)=>{g(t=>({...t,[s]:a}))},$=async()=>{try{_(!0),(await A.put(`/settings/categories/${i.id}`,r)).status===200?c.success("Category successfully updated!"):c.error("Failed to update category. Please try again.")}catch{c.error("An error occurred while updating the category.")}finally{_(!1)}},k=async()=>{try{b(!0),(await A.delete(`/settings/categories/${i.id}`)).status===200?(c.success("Category successfully deleted!"),window.location.href="/settings/categories"):c.error("Failed to delete category. Please try again.")}catch{c.error("An error occurred while deleting the category.")}finally{b(!1)}};return e.jsxs(M,{children:[e.jsx(H,{}),e.jsxs(V,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(W,{className:"-ml-1"}),e.jsx(f,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(R,{children:e.jsxs(z,{children:[e.jsx(m,{children:e.jsx(h,{href:"/dashboard",children:"Dashboard"})}),e.jsx(u,{}),e.jsx(m,{children:e.jsx(h,{href:"/settings",children:"Settings"})}),e.jsx(u,{}),e.jsx(m,{children:e.jsx(h,{href:"/settings/categories",children:"Categories"})}),e.jsx(u,{}),e.jsx(m,{children:e.jsx(h,{href:"#",children:"Edit Category"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Edit Category"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(v,{variant:"outline",onClick:()=>window.location.href="/settings/categories",children:[e.jsx(se,{className:"h-6 w-6"}),"Done Editing"]}),e.jsxs(v,{className:"bg-green-500 text-white hover:bg-green-600 focus:ring-2 focus:ring-green-400",onClick:$,disabled:T,children:[e.jsx(ae,{className:"h-6 w-6"}),"Save Changes"]}),e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(v,{className:"bg-red-500 text-white hover:bg-red-600 focus:ring-2 focus:ring-red-400",disabled:P,children:[e.jsx(ie,{className:"h-6 w-6"}),"Delete Category"]})}),e.jsxs(O,{children:[e.jsxs(Q,{children:[e.jsx(U,{children:"Confirm Deletion"}),e.jsx(X,{children:"Are you sure you want to delete this category? This action cannot be undone."})]}),e.jsxs(Y,{children:[e.jsx(Z,{children:"Cancel"}),e.jsx(ee,{onClick:k,children:"Delete"})]})]})]})]})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-6 items-start",children:[e.jsxs("div",{className:"bg-white border shadow rounded-lg",children:[e.jsx("header",{className:"p-6",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Category Details"})}),e.jsx(f,{}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"name",className:"text-left",children:"Category Name*"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"name",name:"name",value:r.name,onChange:n,required:!0})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"default_weight",className:"text-left",children:"Default Weight*"}),e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx(o,{id:"default_weight",name:"default_weight",type:"number",value:r.default_weight,onChange:n,required:!0,className:"pr-12"}),e.jsx("span",{className:"absolute inset-y-0 right-4 flex items-center text-gray-500",children:"kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"ewc_code_id",className:"text-left",children:"EWC Code*"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(F,{value:r.ewc_code_id,onValueChange:s=>C("ewc_code_id",s),required:!0,children:[e.jsx(I,{children:e.jsx(B,{placeholder:"Select EWC Code"})}),e.jsx(E,{children:N.map(s=>e.jsx(d,{value:s.id,children:s.ewc_code},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"physical_form",className:"text-left",children:"Physical Form"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(F,{value:r.physical_form,onValueChange:s=>C("physical_form",s),children:[e.jsx(I,{children:e.jsx(B,{placeholder:"Select Physical Form"})}),e.jsxs(E,{children:[e.jsx(d,{value:"Solid",children:"Solid"}),e.jsx(d,{value:"Liquid",children:"Liquid"}),e.jsx(d,{value:"Mixed",children:"Mixed"}),e.jsx(d,{value:"Sludge",children:"Sludge"})]})]})})]})]})})]}),e.jsxs("div",{className:"bg-white border shadow rounded-lg",children:[e.jsx("header",{className:"p-6",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Additional Information"})}),e.jsx(f,{}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"concentration",className:"text-left",children:"Concentration"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"concentration",name:"concentration",value:r.concentration,onChange:n})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"chemical_component",className:"text-left",children:"Chemical Component"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"chemical_component",name:"chemical_component",value:r.chemical_component,onChange:n})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"container_type",className:"text-left",children:"Container Type"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"container_type",name:"container_type",value:r.container_type,onChange:n})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"hp_codes",className:"text-left",children:"HP Codes"}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(L,{value:r.hp_codes.map(s=>{const a=x.find(t=>t.id===s);if(a)return{value:a.id,label:`${a.hp_code} - ${a.hp_type}`}}).filter(s=>!!s),options:x.map(s=>({value:s.id,label:`${s.hp_code} - ${s.hp_type}`})),onChange:s=>S("hp_codes",s.map(a=>a.value)),placeholder:"Select HP Codes"}),e.jsx(L,{value:r.spec_fields.map(s=>{const a=p.find(t=>t.id===s);if(a)return{value:a.id,label:a.spec_name}}).filter(s=>!!s),options:p.map(s=>({value:s.id,label:s.spec_name})),onChange:s=>S("spec_fields",s.map(a=>a.value)),placeholder:"Select Spec Fields"})]})]})]})})]})]}),e.jsx("section",{children:e.jsx(G,{parentId:parseInt(i.id)})})]})]})]})}export{$e as default};
