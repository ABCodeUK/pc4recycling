import{r as i,j as e,b as x}from"./app-Bu3c7SRr.js";import{S as h}from"./separator-DeG03c2e.js";import{DataTable as p}from"./data-table-BtxrqkCU.js";import{driverJobColumns as f}from"./Columns-CLD9h-P3.js";import{t as u}from"./index-3t_yQiYB.js";import{B as g}from"./button-Bugdv60n.js";import{C as N,d as j,e as y}from"./card-B3cSDHxc.js";import{c as l}from"./createLucideIcon-Bz1iimCp.js";import{C as w}from"./calendar-BRWOvoKA.js";import{E as v}from"./eye-C-oKGawm.js";import"./index-_W5zKMP9.js";import"./index-C7O5j1LF.js";import"./utils-CytzSlOG.js";import"./table-CKhMPQAp.js";import"./select-DIgAzQ0l.js";import"./index-SS-33b3l.js";import"./index-s5S9bHjZ.js";import"./index-DFqYG-k0.js";import"./index-BUVUn23p.js";import"./user-nxpasSPw.js";import"./index-BwobEAja.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=l("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=l("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);function L(o){const[c,a]=i.useState(!1);return i.useEffect(()=>{const r=window.matchMedia(o);r.matches!==c&&a(r.matches);const n=()=>a(r.matches);return r.addEventListener("change",n),()=>r.removeEventListener("change",n)},[c,o]),c}function H(){const[o,c]=i.useState([]),[a,r]=i.useState(""),n=L("(min-width: 768px)");i.useEffect(()=>{(async()=>{try{const t=await x.get("/api/driver-jobs");c(t.data)}catch{u.error("Failed to fetch jobs.")}})()},[]);const d=o.filter(s=>{var t;return s.job_id.toLowerCase().includes(a.toLowerCase())||s.address.toLowerCase().includes(a.toLowerCase())||((t=s.client)==null?void 0:t.name)&&s.client.name.toLowerCase().includes(a.toLowerCase())}),m=s=>{switch(s){case"Scheduled":return"bg-orange-100 text-orange-800 border-orange-200";case"Postponed":case"Cancelled":return"bg-red-100 text-red-800 border-red-200";case"Collected":case"Processing":case"Complete":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("section",{className:"bg-white border shadow rounded-lg",children:[e.jsx("header",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Your Assigned Collections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collections assigned to you over the next 30 days."})]})})}),e.jsx(h,{}),e.jsx("div",{className:"p-6",children:n?e.jsx(p,{columns:f,data:d}):e.jsx("div",{className:"grid gap-4",children:d.length>0?d.map(s=>{var t;return e.jsxs(N,{className:"overflow-hidden",children:[e.jsxs(j,{className:"p-0",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:e.jsx("a",{href:`/collections/${s.id}`,className:"hover:underline",children:s.job_id})}),e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${m(s.job_status)}`,children:s.job_status})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"font-medium mb-2",children:((t=s.client)==null?void 0:t.name)||"N/A"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"h-4 w-4 mt-0.5 text-gray-500"}),e.jsx("span",{className:"text-sm",children:`${s.address}, ${s.town_city}, ${s.postcode}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.collection_date?new Date(s.collection_date).toLocaleDateString():"Not Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.items_count," items"]})]})]})]}),e.jsx(y,{className:"flex justify-end p-4 pt-0",children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/collections/${s.id}`,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"View Details"]})})]},s.id)}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No collections found"})})})]})}export{H as default};
