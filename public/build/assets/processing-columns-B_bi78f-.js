import{j as s,b as y}from"./app-Cma8V3l9.js";import{S as h,a as x,b as _,c as m,d}from"./select-DcwlFvdE.js";import{I as g}from"./input-_RUYSLpp.js";import{B as f}from"./button-DS1ZOJ9c.js";import{t as b}from"./index-C_iezvca.js";import{T as E}from"./trash-2-DUTB_MOx.js";import{M as S}from"./maximize-2-bAdWuGOe.js";import"./index-DHxxav9I.js";import"./index-jFmiJHnk.js";import"./index-CJRq-bCV.js";import"./index-Dp-u-l4U.js";import"./index-rOaI9F-v.js";import"./index-BUxlmQ7d.js";import"./createLucideIcon-BnM-jrHn.js";import"./index-Cdv8n69u.js";import"./index-CrYhDhYK.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const B=[{id:"actions",header:({table:i})=>{const n=i.options.meta;return n!=null&&n.isEditable?"Actions":null},minSize:100,cell:({row:i,table:n})=>{const e=n.options.meta;return!((e==null?void 0:e.isEditable)??!1)||i.original.added==="Collection"?null:s.jsx("div",{className:"flex gap-2",children:s.jsx(f,{variant:"destructive",size:"sm",onClick:async()=>{var t,r;if(i.original.id>0)try{await y.delete(`/api/jobs/${i.original.job_id}/items/${i.original.id}`);const a=[...n.options.data],o=a.indexOf(i.original);a.splice(o,1),(t=e==null?void 0:e.setItems)==null||t.call(e,[...a]),b.success("Item deleted successfully")}catch(a){console.error("Error deleting item:",a),b.error("Failed to delete item")}else{const a=[...n.options.data],o=a.indexOf(i.original);a.splice(o,1),(r=e==null?void 0:e.setItems)==null||r.call(e,[...a])}},children:s.jsx(E,{className:"h-4 w-4"})})})}},{accessorKey:"item_number",header:"Item #",cell:({row:i})=>i.original.item_number,minSize:120},{accessorKey:"quantity",header:"Qty",minSize:150,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{type:"number",min:"1",value:i.original.quantity,onChange:l=>{var r;const t=parseInt(l.target.value)||1;i.original.quantity=t,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},className:"w-20"}),i.original.quantity>1&&s.jsx(f,{variant:"outline",size:"sm",onClick:()=>{var l;return(l=e==null?void 0:e.onExpandItem)==null?void 0:l.call(e,i.original)},title:"Expand quantity into individual items",children:s.jsx(S,{className:"h-4 w-4"})})]}):s.jsx("span",{children:i.original.quantity})}},{accessorKey:"category_id",header:"Category",cell:({row:i,table:n})=>{var t;const e=n.options.meta,c=(e==null?void 0:e.categories)??[];if(!((e==null?void 0:e.isEditable)??!1)){const r=c.find(a=>a.id===i.original.category_id);return s.jsx("span",{children:(r==null?void 0:r.name)||"-"})}return s.jsxs(h,{value:((t=i.original.category_id)==null?void 0:t.toString())||"",onValueChange:r=>{var a;i.original.category_id=parseInt(r),i.original.sub_category_id=null,i.original.processing_specification={},(a=e==null?void 0:e.setItems)==null||a.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select category"})}),s.jsx(m,{children:c.map(r=>s.jsx(d,{value:r.id.toString(),children:r.name},r.id))})]})}},{accessorKey:"sub_category_id",header:"Sub Category",cell:({row:i,table:n})=>{var a;const e=n.options.meta,c=(e==null?void 0:e.categories)??[],l=(e==null?void 0:e.isEditable)??!1,t=c.find(o=>o.id===i.original.category_id),r=(t==null?void 0:t.sub_categories)??[];if(r.length===0)return null;if(!l){const o=r.find(p=>p.id===i.original.sub_category_id);return s.jsx("span",{children:(o==null?void 0:o.name)||"-"})}return s.jsxs(h,{value:((a=i.original.sub_category_id)==null?void 0:a.toString())||"",onValueChange:o=>{var p;i.original.sub_category_id=parseInt(o),(p=e==null?void 0:e.setItems)==null||p.call(e,[...n.options.data])},disabled:!i.original.category_id,children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select sub-category"})}),s.jsx(m,{children:r.map(o=>s.jsx(d,{value:o.id.toString(),children:o.name},o.id))})]})}},{accessorKey:"processing_make",header:"Make",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.processing_make||"",onChange:l=>{var r;const t=n.options.data.map(a=>({...a,processing_make:a===i.original?l.target.value:a.processing_make}));(r=e==null?void 0:e.setItems)==null||r.call(e,t)},placeholder:"Enter make"}):s.jsx("span",{children:i.original.processing_make||"-"})}},{accessorKey:"processing_model",header:"Model",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.processing_model||"",onChange:l=>{var t;i.original.processing_model=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:i.original.processing_model||"-"})}},{accessorKey:"serial_number",header:"Serial Number",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.serial_number||"",onChange:l=>{var t;i.original.serial_number=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter serial number"}):s.jsx("span",{children:i.original.serial_number||"-"})}},{accessorKey:"asset_tag",header:"Asset Tag",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(g,{value:i.original.asset_tag||"",onChange:l=>{var t;i.original.asset_tag=l.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter asset tag"}):s.jsx("span",{children:i.original.asset_tag||"-"})}},{accessorKey:"processing_erasure_required",header:"Erasure Required",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs(h,{value:i.original.processing_erasure_required||"",onValueChange:l=>{var t;i.original.processing_erasure_required=l,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select option"})}),s.jsxs(m,{children:[s.jsx(d,{value:"Yes",children:"Yes"}),s.jsx(d,{value:"No",children:"No"}),s.jsx(d,{value:"N/A",children:"N/A"}),s.jsx(d,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:i.original.processing_erasure_required||"-"})}},{accessorKey:"processing_data_status",header:({table:i})=>{const n=i.options.meta;return["Processing","Received at Facility","Completed"].includes((n==null?void 0:n.jobStatus)||"")?"Data Status":null},minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,l=e==null?void 0:e.jobStatus;return["Processing","Received at Facility","Completed"].includes(l||"")?c?s.jsxs(h,{value:i.original.processing_data_status||"",onValueChange:t=>{var r;i.original.processing_data_status=t,(r=e==null?void 0:e.setItems)==null||r.call(e,[...n.options.data])},children:[s.jsx(x,{children:s.jsx(_,{placeholder:"Select status"})}),s.jsxs(m,{children:[s.jsx(d,{value:"Destroyed (Physical Destruction)",children:"Destroyed (Physical Destruction)"}),s.jsx(d,{value:"Wiped Aiken",children:"Wiped Aiken"}),s.jsx(d,{value:"Wiped Ziperase",children:"Wiped Ziperase"}),s.jsx(d,{value:"No Erasure Required",children:"No Erasure Required"}),s.jsx(d,{value:"Drive Removed by Client",children:"Drive Removed by Client"})]})]}):s.jsx("span",{children:i.original.processing_data_status||"-"}):null}},{accessorKey:"processing_specification",header:"Specifications",minSize:800,cell:({row:i,table:n})=>{const e=n.options.meta,c=(e==null?void 0:e.isEditable)??!1,t=((e==null?void 0:e.categories)??[]).find(a=>a.id===i.original.category_id),r=(t==null?void 0:t.spec_fields)??[];if(typeof i.original.processing_specification=="string")try{i.original.processing_specification=JSON.parse(i.original.processing_specification)}catch{i.original.processing_specification={}}return c?!t||r.length===0?s.jsx("span",{className:"text-muted-foreground"}):s.jsx("div",{className:"flex flex-row gap-2",children:r.map(a=>{var o;return s.jsxs("div",{className:"relative w-[250px]",children:[s.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground whitespace-nowrap pointer-events-none",children:[a.spec_name,":"]}),s.jsx(g,{value:((o=i.original.processing_specification)==null?void 0:o[a.spec_name])||"",onChange:p=>{var j;const v=n.options.data.map(u=>u===i.original?{...u,processing_specification:{...u.processing_specification,[a.spec_name]:p.target.value}}:u);(j=e==null?void 0:e.setItems)==null||j.call(e,v)},className:"h-9 w-full pl-[calc(1.5rem+var(--label-width))]",style:{"--label-width":`${a.spec_name.length*8}px`}})]},a.id)})}):i.original.processing_specification?s.jsx("div",{className:"space-y-1",children:r.map(a=>{var o;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium",children:[a.spec_name,":"]})," ",((o=i.original.processing_specification)==null?void 0:o[a.spec_name])||"-"]},a.id)})}):"-"}}];export{B as processingColumns};
