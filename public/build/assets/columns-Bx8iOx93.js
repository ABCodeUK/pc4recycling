import{j as s,b as S}from"./app-BB65Mc1n.js";import{S as b,a as j,b as E,c as m,d as h}from"./select-Dp5Udnaz.js";import{I as u}from"./input-BdsrUm4j.js";import{B as y}from"./button-AMd0rht4.js";import{t as v}from"./index-BD8g9cTJ.js";import{M as k}from"./maximize-2-IQ1HLsfM.js";import{T as N}from"./trash-2-CyBVRyGm.js";import"./index-BD0Aflgb.js";import"./index-DJRbUwlk.js";import"./index-d89-VRCp.js";import"./index-CwOflKzf.js";import"./index-C6WAMNeG.js";import"./index-C6DuYNlM.js";import"./createLucideIcon-DhOTYlCm.js";import"./index--1ygw0mz.js";import"./index-Bax49BpN.js";import"./index-DbDOfuCE.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";const H=[{accessorKey:"item_number",header:"Item #",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.item_number,readOnly:!0,className:"w-24"}):i.original.item_number}},{accessorKey:"quantity",header:"Qty",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs("div",{className:"flex items-center",children:[s.jsx(u,{type:"number",min:1,value:i.original.quantity,onChange:a=>{var t;i.original.quantity=parseInt(a.target.value),(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},className:"w-20"}),s.jsx(y,{variant:"outline",size:"sm",onClick:()=>{var a;return(a=e==null?void 0:e.onExpandItem)==null?void 0:a.call(e,i.original)},className:"ml-2",children:s.jsx(k,{className:"h-4 w-4"})})]}):i.original.quantity}},{accessorKey:"category_id",header:"Category",cell:({row:i,table:n})=>{var c;const e=n.options.meta,r=(e==null?void 0:e.isEditable)??!1,a=(e==null?void 0:e.categories)??[],t=a.find(l=>l.id===i.original.category_id);return r?s.jsxs(b,{value:(c=i.original.category_id)==null?void 0:c.toString(),onValueChange:l=>{var o;const d=parseInt(l);i.original.category_id=d,i.original.sub_category_id=null;const g=a.find(p=>p.id===d);g!=null&&g.default_weight?i.original.weight=g.default_weight:i.original.weight=null,(o=e==null?void 0:e.setItems)==null||o.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(E,{placeholder:"Select category"})}),s.jsx(m,{children:a.map(l=>s.jsx(h,{value:l.id.toString(),children:l.name},l.id))})]}):s.jsx("span",{children:(t==null?void 0:t.name)||"-"})}},{accessorKey:"sub_category_id",header:"Sub Category",cell:({row:i,table:n})=>{var l,d,g;const e=n.options.meta,r=(e==null?void 0:e.isEditable)??!1,t=((e==null?void 0:e.categories)??[]).find(o=>o.id===i.original.category_id),c=(l=t==null?void 0:t.sub_categories)==null?void 0:l.find(o=>o.id===i.original.sub_category_id);return(d=t==null?void 0:t.sub_categories)!=null&&d.length?r?s.jsxs(b,{value:(g=i.original.sub_category_id)==null?void 0:g.toString(),onValueChange:o=>{var _,f;const p=parseInt(o);i.original.sub_category_id=p;const x=(_=t.sub_categories)==null?void 0:_.find(I=>I.id===p);x!=null&&x.default_weight&&(i.original.weight=x.default_weight),(f=e==null?void 0:e.setItems)==null||f.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(E,{placeholder:"Select sub-category"})}),s.jsx(m,{children:t.sub_categories.map(o=>s.jsx(h,{value:o.id.toString(),children:o.name},o.id))})]}):s.jsx("span",{children:(c==null?void 0:c.name)||"-"}):null}},{accessorKey:"make",header:"Make",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.make||"",onChange:a=>{var t;i.original.make=a.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter make"}):s.jsx("span",{children:i.original.make||"-"})}},{accessorKey:"model",header:"Model",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.model||"",onChange:a=>{var t;i.original.model=a.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter model"}):s.jsx("span",{children:i.original.model||"-"})}},{accessorKey:"serial_number",header:"Serial Number",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.serial_number||"",onChange:a=>{var t;i.original.serial_number=a.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter serial number"}):s.jsx("span",{children:i.original.serial_number||"-"})}},{accessorKey:"asset_tag",header:"Asset Tag",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.asset_tag||"",onChange:a=>{var t;i.original.asset_tag=a.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter asset tag"}):s.jsx("span",{children:i.original.asset_tag||"-"})}},{accessorKey:"weight",header:"Weight (kg)",minSize:180,cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsx(u,{value:i.original.weight||"",onChange:a=>{var t;i.original.weight=a.target.value,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},placeholder:"Enter weight"}):s.jsx("span",{children:i.original.weight||"-"})}},{accessorKey:"erasure_required",header:"Erasure Required",cell:({row:i,table:n})=>{const e=n.options.meta;return(e==null?void 0:e.isEditable)??!1?s.jsxs(b,{value:i.original.erasure_required||"",onValueChange:a=>{var t;i.original.erasure_required=a,(t=e==null?void 0:e.setItems)==null||t.call(e,[...n.options.data])},children:[s.jsx(j,{children:s.jsx(E,{placeholder:"Select option"})}),s.jsxs(m,{children:[s.jsx(h,{value:"Yes",children:"Yes"}),s.jsx(h,{value:"No",children:"No"}),s.jsx(h,{value:"N/A",children:"N/A"}),s.jsx(h,{value:"Unknown",children:"Unknown"})]})]}):s.jsx("span",{children:i.original.erasure_required||"-"})}},{id:"actions",header:({table:i})=>{const n=i.options.meta;return n!=null&&n.isEditable?"Actions":null},cell:({row:i,table:n})=>{const e=n.options.meta;if(!((e==null?void 0:e.isEditable)??!1))return null;const a=i.original.id>0;return s.jsx(y,{variant:"destructive",size:"sm",onClick:async()=>{var t,c;if(a)try{await S.delete(`/api/jobs/${i.original.job_id}/items/${i.original.id}`);const l=[...n.options.data],d=l.indexOf(i.original);l.splice(d,1),(t=e==null?void 0:e.setItems)==null||t.call(e,[...l]),v.success("Item deleted successfully")}catch(l){console.error("Error deleting item:",l),v.error("Failed to delete item")}else{const l=[...n.options.data],d=l.indexOf(i.original);l.splice(d,1),(c=e==null?void 0:e.setItems)==null||c.call(e,[...l])}},children:s.jsx(N,{className:"h-4 w-4"})})}}];export{H as jobItemColumns};
