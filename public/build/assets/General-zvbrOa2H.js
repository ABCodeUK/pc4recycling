import{r as u,j as e,b as f}from"./app-BB65Mc1n.js";import{S as M,A as $,a as q,b as R,B as U,c as G,d as g,e as j,f as D}from"./breadcrumb-D6RxqHid.js";import{S as H}from"./separator-BWJbAkR8.js";import{B as o}from"./button-AMd0rht4.js";import{I as n}from"./input-BdsrUm4j.js";import{L as i}from"./label-B29Fbpt8.js";import{t as d}from"./index-BD8g9cTJ.js";import{D as N,a as J,b as w,c as y,d as b,e as C,f as S}from"./dialog-44kL--cs.js";import{c as k}from"./createLucideIcon-DhOTYlCm.js";import{F}from"./file-text-BshKaKvK.js";import{T as E}from"./trash-2-CyBVRyGm.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-BD0Aflgb.js";import"./index-d89-VRCp.js";import"./index-DJRbUwlk.js";import"./index-CwOflKzf.js";import"./index-C6WAMNeG.js";import"./index-C6DuYNlM.js";import"./index-DwCxHBl2.js";import"./index--1ygw0mz.js";import"./index-Bax49BpN.js";import"./index-D9Y9XxbS.js";import"./calendar-C06wmWHl.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=k("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=k("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function ve({documents:_}){const[z,p]=u.useState(!1),[T,h]=u.useState(!1),[t,l]=u.useState(null),[v,x]=u.useState(null),[r,c]=u.useState({name:"",date_from:"",date_to:"",file:null,description:""}),O=s=>{var m;const a=(m=s.target.files)==null?void 0:m[0];if(a){if(a.size>134217728){d.error("File size must be less than 128MB"),s.target.value="";return}x(a)}},P=()=>{if(t){l(a=>a?{...a,document_url:null}:null),x(null);const s=document.querySelector('input[type="file"]');s&&(s.value="")}},A=async()=>{if(!r.name||!r.date_from){d.error("Please fill in all required fields");return}const s=new FormData;s.append("document_name",r.name),s.append("date_from",r.date_from),s.append("document_description",r.description),r.date_to&&s.append("date_to",r.date_to),r.file&&s.append("document",r.file);try{(await f.post("/settings/documents/documents",s,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(d.success("Document added successfully"),p(!1),c({name:"",description:"",date_from:"",date_to:"",file:null}),window.location.reload())}catch(a){console.error("Error adding document:",a),d.error("Failed to add document")}},B=async()=>{if(!t||!t.document_name||!t.date_from){d.error("Please fill in all required fields");return}const s=new FormData;s.append("document_name",t.document_name),s.append("date_from",t.date_from),s.append("document_description",t.document_description),t.date_to&&s.append("date_to",t.date_to),v?s.append("document",v):t.document_url||s.append("remove_document","true"),s.append("_method","PUT");try{(await f.post(`/settings/documents/documents/${t.id}`,s,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(d.success("Document updated successfully"),h(!1),l(null),x(null),window.location.reload())}catch(a){console.error("Error updating document:",a),d.error("Failed to update document")}},I=s=>{const a={...s,date_from:new Date(s.date_from).toISOString().split("T")[0],date_to:s.date_to?new Date(s.date_to).toISOString().split("T")[0]:""};l(a),h(!0)},L=async s=>{try{(await f.delete(`/settings/documents/documents/${s}`)).data.success&&(d.success("Document deleted successfully"),window.location.reload())}catch(a){console.error("Error deleting document:",a),d.error("Failed to delete document")}};return e.jsxs(M,{children:[e.jsx($,{}),e.jsxs(q,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(R,{className:"-ml-1"}),e.jsx(H,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(g,{children:e.jsx(j,{href:"/dashboard",children:"Dashboard"})}),e.jsx(D,{}),e.jsx(g,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(D,{}),e.jsx(g,{children:e.jsx(j,{href:"/settings/documents",children:"Documents"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Company Documents"}),e.jsxs(N,{open:z,onOpenChange:p,children:[e.jsx(J,{asChild:!0,children:e.jsxs(o,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Add Document"]})}),e.jsxs(w,{className:"sm:max-w-[500px]",children:[e.jsxs(y,{children:[e.jsx(b,{children:"Add New Document"}),e.jsx(C,{children:"Enter details for the new document."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Document Name"}),e.jsx(n,{value:r.name,onChange:s=>c({...r,name:s.target.value}),placeholder:"Enter document name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Document Description"}),e.jsx(n,{value:r.description,onChange:s=>c({...r,description:s.target.value}),placeholder:"Enter document description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Valid From"}),e.jsx(n,{type:"date",value:r.date_from,onChange:s=>c({...r,date_from:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Valid To (Optional)"}),e.jsx(n,{type:"date",value:r.date_to,onChange:s=>c({...r,date_to:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Document File (PDF) (Optional)"}),e.jsx(n,{type:"file",accept:".pdf",onChange:s=>{var m;const a=(m=s.target.files)==null?void 0:m[0];if(a){if(a.size>134217728){d.error("File size must be less than 128MB"),s.target.value="";return}c({...r,file:a})}}})]})]}),e.jsxs(S,{children:[e.jsx(o,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(o,{onClick:A,children:"Add Document"})]})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.isArray(_)&&[..._].sort((s,a)=>s.document_name.localeCompare(a.document_name)).map(s=>e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.document_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.document_description}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Valid: ",new Date(s.date_from).toLocaleDateString()," - ",s.date_to?new Date(s.date_to).toLocaleDateString():"Permanent"]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.document_url&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>window.open(`/storage/${s.document_url}`,"_blank"),title:"View PDF",children:e.jsx(F,{className:"h-4 w-4 text-green-500"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>I(s),children:e.jsx(K,{className:"h-4 w-4 text-blue-500"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>L(s.id),children:e.jsx(E,{className:"h-4 w-4 text-red-500"})})]})]})},s.id))}),e.jsx(N,{open:T,onOpenChange:h,children:e.jsxs(w,{className:"sm:max-w-[500px]",children:[e.jsxs(y,{children:[e.jsx(b,{children:t?"Edit Document":"Add New Document"}),e.jsx(C,{children:t?"Update document details.":"Enter details for the new document."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Document Name"}),e.jsx(n,{value:(t==null?void 0:t.document_name)||"",onChange:s=>l(a=>a?{...a,document_name:s.target.value}:null),placeholder:"Enter document name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Document Description"}),e.jsx(n,{value:(t==null?void 0:t.document_description)||"",onChange:s=>l(a=>a?{...a,document_description:s.target.value}:null),placeholder:"Enter document description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Valid From"}),e.jsx(n,{type:"date",value:(t==null?void 0:t.date_from)||"",onChange:s=>l(a=>a?{...a,date_from:s.target.value}:null)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Valid To (Optional)"}),e.jsx(n,{type:"date",value:(t==null?void 0:t.date_to)||"",onChange:s=>l(a=>a?{...a,date_to:s.target.value}:null)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{children:"Document File (PDF) (Optional)"}),t!=null&&t.document_url?e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[e.jsxs("a",{href:`/storage/${t.document_url}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/90 flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),`${t.document_name}.pdf`]}),e.jsx(o,{variant:"ghost",size:"icon",onClick:P,children:e.jsx(E,{className:"h-4 w-4 text-red-500"})})]}):e.jsx(n,{type:"file",accept:".pdf",onChange:O})]})]}),e.jsx(S,{children:e.jsx(o,{onClick:B,children:"Save Changes"})})]})})]})]})]})}export{ve as default};
