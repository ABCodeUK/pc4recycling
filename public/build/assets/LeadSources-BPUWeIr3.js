import{r as t,j as e,b}from"./app-Cma8V3l9.js";import{S as K,A as Q,a as X,b as Y,B as Z,c as ee,d as p,e as j,f as D}from"./breadcrumb-Cr6GXjz3.js";import{S as F}from"./separator-CEPuzrhi.js";import{B as n}from"./button-DS1ZOJ9c.js";import{I as N}from"./input-_RUYSLpp.js";import{L as k}from"./label-IUEK5zVZ.js";import{DataTable as se}from"./data-table-1txjVFM0.js";import{columns as ae}from"./columns-B7ixL1vf.js";import re from"./VariablesNavigation-xlLQR5_i.js";import{D as E,a as te,b as T,c as I,d as B,e as P,f as O}from"./dialog-C3tgJ_8I.js";import{A as le,a as ie,b as ne,c as oe,d as de,e as ce,f as me,g as he,h as xe}from"./alert-dialog-BGiwvZFs.js";import{t as l}from"./index-C_iezvca.js";import{S as ue}from"./square-pen-DsVzVgxC.js";import{T as pe}from"./trash-2-DUTB_MOx.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-BH7C-wFc.js";import"./createLucideIcon-BnM-jrHn.js";import"./index-jFmiJHnk.js";import"./index-rOaI9F-v.js";import"./index-BUxlmQ7d.js";import"./index-Dp-u-l4U.js";import"./index-DHxxav9I.js";import"./index-CoYLIXTa.js";import"./index-CJRq-bCV.js";import"./index-Cdv8n69u.js";import"./index-CIrE5OO0.js";import"./calendar-TwlUnTX4.js";import"./table-vJebbvAp.js";import"./select-DcwlFvdE.js";import"./index-CrYhDhYK.js";import"./arrow-up-down-BNv_JWN3.js";import"./tabs-sJVBdolV.js";function Qe({leadSources:V}){const[z,g]=t.useState(V),[v,L]=t.useState({ls_name:""}),[C,A]=t.useState({ls_name:""}),[d,c]=t.useState({ls_name:""}),[w,H]=t.useState(""),[je,m]=t.useState(!1),[f,y]=t.useState(null),[$,h]=t.useState(!1),[q,x]=t.useState(!1),u=()=>c({ls_name:""}),S=()=>{L({ls_name:""}),u()},_=(s,a)=>{const{name:r,value:i}=s.target;a==="add"?L(o=>({...o,[r]:i})):A(o=>({...o,[r]:i})),c(o=>({...o,[r]:""}))},M=s=>H(s.target.value),R=async()=>{u();try{m(!0);const s=await b.post("/settings/variables/lead-sources",v);if(s.status===200){const a=s.data;g(r=>[...r,a]),S(),h(!1),l.success("Lead Source successfully created!")}else l.error("Failed to create Lead Source. Please try again.")}catch(s){s.response&&s.response.data.errors?c(s.response.data.errors):l.error("Error creating Lead Source. Please check the logs.")}finally{m(!1)}},U=async()=>{if(f){u();try{m(!0);const s=await b.put(`/settings/variables/lead-sources/${f}`,C);if(s.status===200){const a=s.data;g(r=>r.map(i=>i.id===f?a:i)),y(null),x(!1),l.success("Lead Source successfully updated!")}else l.error("Failed to update Lead Source. Please try again.")}catch(s){s.response&&s.response.data.errors?c(s.response.data.errors):l.error("Error updating Lead Source. Please check the logs.")}finally{m(!1)}}},W=async s=>{try{(await b.delete(`/settings/variables/lead-sources/${s}`)).status===200?(g(r=>r.filter(i=>i.id!==s)),l.success("Lead Source successfully deleted!")):l.error("Failed to delete Lead Source. Please try again.")}catch{l.error("Error deleting Lead Source. Please check the logs.")}},G=z.filter(s=>((s==null?void 0:s.ls_name)??"").toLowerCase().includes(w.toLowerCase())),J=[...ae,{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{A({ls_name:a.ls_name}),u(),y(a.id),x(!0)},children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(de,{children:"Confirm Deletion"}),e.jsxs(ce,{children:["Are you sure you want to delete Lead Source"," ",e.jsx("b",{children:a.ls_name}),"?"]})]}),e.jsxs(me,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(xe,{onClick:()=>W(a.id),children:"Delete"})]})]})]})]})}}];return e.jsxs(K,{children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(Y,{className:"-ml-1"}),e.jsx(F,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(p,{children:e.jsx(j,{href:"/",children:"Dashboard"})}),e.jsx(D,{className:"hidden md:block"}),e.jsx(p,{children:e.jsx(j,{href:"/settings",children:"Settings"})}),e.jsx(D,{className:"hidden md:block"}),e.jsx(p,{children:e.jsx(j,{href:"/settings/variables",children:"Variables"})}),e.jsx(D,{className:"hidden md:block"}),e.jsx(p,{children:e.jsx(j,{href:"/settings/variables/lead-sources",children:"Lead Sources"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Variables"}),e.jsx(re,{currentTab:"lead-sources"}),e.jsxs("section",{className:"bg-white border shadow rounded-lg p-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold leading-7 text-gray-900",children:"Manage Lead Sources"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or delete Lead Sources used in the system."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{placeholder:"Search Lead Sources...",value:w,onChange:M,className:"max-w-sm"}),e.jsxs(E,{open:$,onOpenChange:s=>{s||S(),h(s)},children:[e.jsx(te,{asChild:!0,children:e.jsx(n,{onClick:()=>h(!0),children:"Add Lead Source"})}),e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Add Lead Source"}),e.jsx(P,{children:"Fill in the details for the new Lead Source below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsxs(k,{htmlFor:"ls_name",children:["Lead Source Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{id:"ls_name",name:"ls_name",value:v.ls_name,onChange:s=>_(s,"add")}),d.ls_name&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ls_name})]})})]}),e.jsxs(O,{children:[e.jsx(n,{variant:"outline",onClick:()=>{S(),h(!1)},children:"Cancel"}),e.jsx(n,{onClick:R,children:"Create Lead Source"})]})]})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(se,{columns:J,data:G})]}),e.jsx(E,{open:q,onOpenChange:x,children:e.jsxs(T,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Edit Lead Source"}),e.jsx(P,{children:"Update the details for the Lead Source below."})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[" ",e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsxs(k,{htmlFor:"ls_name_edit",children:["Lead Source Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{id:"ls_name_edit",name:"ls_name",value:C.ls_name,onChange:s=>_(s,"edit")}),d.ls_name&&e.jsx("p",{className:"text-red-600 text-sm",children:d.ls_name})]})})]}),e.jsxs(O,{children:[e.jsx(n,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(n,{onClick:U,children:"Save Changes"})]})]})})]})]})]})}export{Qe as default};
