import{j as e,r as u,b as D}from"./app-CxxjQbGd.js";import{S as q,A as M,a as H,b as V,B as W,c as R,d as m,e as h,f as j}from"./breadcrumb-CVfpatPu.js";import{S as z}from"./separator-OWjsBv_k.js";import{B as f}from"./button-BfCUFj2v.js";import{I as o}from"./input-DPP4pqCX.js";import{L as l}from"./label-2wttpgDy.js";import{S as A,a as F,b as I,c as B,d}from"./select-CnJHFvlZ.js";import{M as E}from"./multiple-select-LXVTmnv3.js";import G from"./SubCategories-BZis4VR3.js";import{t as n}from"./index-CGbDflUn.js";import{A as J,a as K,b as O,c as Q,d as U,e as X,f as Y,g as Z,h as ee}from"./alert-dialog-IHHWyKpT.js";import{A as se}from"./arrow-left-BksZfyPd.js";import{S as ae}from"./save-CPnrAY8Z.js";import{T as ie}from"./trash-2-BuUhqBcA.js";import"./index-B6zYnIfL.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-uXkLkjFM.js";import"./createLucideIcon-YMZQpf5O.js";import"./index-CpwjmW8Z.js";import"./Combination-DnQhWoyI.js";import"./index-Drt13xjj.js";import"./index-DdQz_MXT.js";import"./index-Dy7fGhxC.js";import"./index-BlL_lDRx.js";import"./index---YqbKSt.js";import"./badge-BZbc9Efx.js";import"./dialog-0RdKrRPh.js";import"./data-table-DunlG8C3.js";import"./table-B3GsT3Yk.js";import"./columns-RM8vEUDH.js";import"./square-pen-DlkBvHz6.js";function $e({category:i,ewcCodes:v,hpCodes:p,specFields:x}){var S,y,w;if(!i||!v||!p||!x)return e.jsx("div",{children:"Loading..."});const[r,g]=u.useState({name:i.name||"",default_weight:i.default_weight||"",ewc_code_id:((S=i.ewc_code)==null?void 0:S.id)||"",physical_form:i.physical_form||"",concentration:i.concentration||"",chemical_component:i.chemical_component||"",container_type:i.container_type||"",hp_codes:((y=i.hp_codes)==null?void 0:y.map(s=>s.id))||[],spec_fields:((w=i.spec_fields)==null?void 0:w.map(s=>s.id))||[]}),[L,_]=u.useState(!1),[T,N]=u.useState(!1),c=s=>{const{name:a,value:t}=s.target;g(k=>({...k,[a]:t}))},b=(s,a)=>{g(t=>({...t,[s]:a}))},C=(s,a)=>{g(t=>({...t,[s]:a}))},P=async()=>{try{_(!0),(await D.put(`/settings/categories/${i.id}`,r)).status===200?n.success("Category successfully updated!"):n.error("Failed to update category. Please try again.")}catch{n.error("An error occurred while updating the category.")}finally{_(!1)}},$=async()=>{try{N(!0),(await D.delete(`/settings/categories/${i.id}`)).status===200?(n.success("Category successfully deleted!"),window.location.href="/settings/categories"):n.error("Failed to delete category. Please try again.")}catch{n.error("An error occurred while deleting the category.")}finally{N(!1)}};return e.jsxs(q,{children:[e.jsx(M,{}),e.jsxs(H,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 bg-white border-b",children:[e.jsx(V,{className:"-ml-1"}),e.jsx(z,{orientation:"vertical",className:"h-4 mx-2"}),e.jsx(W,{children:e.jsxs(R,{children:[e.jsx(m,{children:e.jsx(h,{href:"/dashboard",children:"Dashboard"})}),e.jsx(j,{}),e.jsx(m,{children:e.jsx(h,{href:"/settings",children:"Settings"})}),e.jsx(j,{}),e.jsx(m,{children:e.jsx(h,{href:"/settings/categories",children:"Categories"})}),e.jsx(j,{}),e.jsx(m,{children:e.jsx(h,{href:"#",children:"Edit Category"})})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-3xl font-semibold text-gray-800",children:"Settings: Edit Category"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(f,{variant:"outline",onClick:()=>window.location.href="/settings/categories",children:[e.jsx(se,{className:"h-6 w-6"}),"Done Editing"]}),e.jsxs(f,{className:"bg-green-500 text-white hover:bg-green-600 focus:ring-2 focus:ring-green-400",onClick:P,disabled:L,children:[e.jsx(ae,{className:"h-6 w-6"}),"Save Changes"]}),e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(f,{className:"bg-red-500 text-white hover:bg-red-600 focus:ring-2 focus:ring-red-400",disabled:T,children:[e.jsx(ie,{className:"h-6 w-6"}),"Delete Category"]})}),e.jsxs(O,{children:[e.jsxs(Q,{children:[e.jsx(U,{children:"Confirm Deletion"}),e.jsx(X,{children:"Are you sure you want to delete this category? This action cannot be undone."})]}),e.jsxs(Y,{children:[e.jsx(Z,{children:"Cancel"}),e.jsx(ee,{onClick:$,children:"Delete"})]})]})]})]})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-6 items-start",children:[e.jsx("div",{className:"bg-white border shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"name",className:"text-left",children:"Category Name*"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"name",name:"name",value:r.name,onChange:c,required:!0})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"default_weight",className:"text-left",children:"Default Weight*"}),e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx(o,{id:"default_weight",name:"default_weight",type:"number",value:r.default_weight,onChange:c,required:!0,className:"pr-12"}),e.jsx("span",{className:"absolute inset-y-0 right-4 flex items-center text-gray-500",children:"kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"ewc_code_id",className:"text-left",children:"EWC Code*"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(A,{value:r.ewc_code_id,onValueChange:s=>b("ewc_code_id",s),required:!0,children:[e.jsx(F,{children:e.jsx(I,{placeholder:"Select EWC Code"})}),e.jsx(B,{children:v.map(s=>e.jsx(d,{value:s.id,children:s.ewc_code},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"physical_form",className:"text-left",children:"Physical Form"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(A,{value:r.physical_form,onValueChange:s=>b("physical_form",s),children:[e.jsx(F,{children:e.jsx(I,{placeholder:"Select Physical Form"})}),e.jsxs(B,{children:[e.jsx(d,{value:"Solid",children:"Solid"}),e.jsx(d,{value:"Liquid",children:"Liquid"}),e.jsx(d,{value:"Mixed",children:"Mixed"}),e.jsx(d,{value:"Sludge",children:"Sludge"})]})]})})]})]})}),e.jsx("div",{className:"bg-white border shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"concentration",className:"text-left",children:"Concentration"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"concentration",name:"concentration",value:r.concentration,onChange:c})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"chemical_component",className:"text-left",children:"Chemical Component"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"chemical_component",name:"chemical_component",value:r.chemical_component,onChange:c})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"container_type",className:"text-left",children:"Container Type"}),e.jsx("div",{className:"col-span-2",children:e.jsx(o,{id:"container_type",name:"container_type",value:r.container_type,onChange:c})})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(l,{htmlFor:"hp_codes",className:"text-left",children:"HP Codes"}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(E,{value:r.hp_codes.map(s=>{const a=p.find(t=>t.id===s);if(a)return{value:a.id,label:`${a.hp_code} - ${a.hp_type}`}}).filter(s=>!!s),options:p.map(s=>({value:s.id,label:`${s.hp_code} - ${s.hp_type}`})),onChange:s=>C("hp_codes",s.map(a=>a.value)),placeholder:"Select HP Codes"}),e.jsx(E,{value:r.spec_fields.map(s=>{const a=x.find(t=>t.id===s);if(a)return{value:a.id,label:a.spec_name}}).filter(s=>!!s),options:x.map(s=>({value:s.id,label:s.spec_name})),onChange:s=>C("spec_fields",s.map(a=>a.value)),placeholder:"Select Spec Fields"})]})]})]})})]}),e.jsx("section",{children:e.jsx(G,{parentId:parseInt(i.id)})})]})]})]})}export{$e as default};
